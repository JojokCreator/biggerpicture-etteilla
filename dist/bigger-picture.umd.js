((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).BiggerPicture=e()})(this,(function(){var t;function e(){}const n=t=>t;function i(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(o)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let u;function a(t,e){return t!=t?e==e:t!==e}function d(t,n,i){t.$$.on_destroy.push(((t,...n)=>{if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i})(n,i))}function f(t,e,n){return t.set(n),e}function p(t){return t&&l(t.destroy)?t.destroy:e}const m="undefined"!=typeof window;let h=m?()=>window.performance.now():()=>Date.now(),g=m?t=>requestAnimationFrame(t):e;const $=new Set;function y(t){$.forEach((e=>{e.c(t)||($.delete(e),e.f())})),0!==$.size&&g(y)}function b(t){let e;return 0===$.size&&g(y),{promise:new Promise((n=>{$.add(e={c:t,f:n})})),abort(){$.delete(e)}}}function v(t,e){t.appendChild(e)}function x(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function w(t){const e=I("style");return((t,e)=>{v(t.head||t,e)})(x(t),e),e.sheet}function _(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function I(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function E(){return C(" ")}function z(){return C("")}function D(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function H(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){t.wholeText!==(e=""+e)&&(t.data=e)}function A(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function T(t,e,n){t.classList[n?"add":"remove"](e)}class N{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=I(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;this.n.length>e;e+=1)_(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(k)}}const M=new Map;let R,L=0;function O(t,e,n,i,o,r,s,l=0){const c=16.666/i;let u="{\n";for(let t=0;1>=t;t+=c){const i=e+(n-e)*r(t);u+=100*t+`%{${s(i,1-i)}}\n`}const a=u+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${(t=>{let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0})(a)}_${l}`,f=x(t),{stylesheet:p,rules:m}=M.get(f)||((t,e)=>{const n={stylesheet:w(e),rules:{}};return M.set(t,n),n})(f,t);m[d]||(m[d]=1,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?h+", ":""}${d} ${i}ms linear ${o}ms 1 both`,L+=1,d}function P(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>0>t.indexOf(e):t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),L-=o,L||g((()=>{L||(M.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),M.clear())})))}function W(t){R=t}const Y=[],j=[],q=[],B=[],X=Promise.resolve();let U=0;function F(t){q.push(t)}const J=new Set;let K,G=0;function Q(){const t=R;do{for(;Y.length>G;){const t=Y[G];G++,W(t),V(t.$$)}for(W(null),Y.length=0,G=0;j.length;)j.pop()();for(let t=0;q.length>t;t+=1){const e=q[t];J.has(e)||(J.add(e),e())}q.length=0}while(Y.length);for(;B.length;)B.pop()();U=0,J.clear(),W(t)}function V(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}function Z(){return K||(K=Promise.resolve(),K.then((()=>{K=null}))),K}function tt(t,e,n){t.dispatchEvent(((t,e,n=0)=>{const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,0,e),i})(`${e?"intro":"outro"}${n}`))}const et=new Set;let nt;function it(){nt={r:0,c:[],p:nt}}function ot(){nt.r||s(nt.c),nt=nt.p}function rt(t,e){t&&t.i&&(et.delete(t),t.i(e))}function st(t,e,n,i){if(t&&t.o){if(et.has(t))return;et.add(t),nt.c.push((()=>{et.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const lt={duration:0};function ct(t,i,o){let r,s,c=i(t,o),u=0,a=0;function d(){r&&P(t,r)}function f(){const{delay:i=0,duration:o=300,easing:l=n,tick:f=e,css:p}=c||lt;p&&(r=O(t,0,1,o,i,l,p,a++)),f(0,1);const m=h()+i,g=m+o;s&&s.abort(),u=1,F((()=>tt(t,1,"start"))),s=b((e=>{if(u){if(e>=g)return f(1,0),tt(t,1,"end"),d(),u=0;if(e>=m){const t=l((e-m)/o);f(t,1-t)}}return u}))}let p=0;return{start(){p||(p=1,P(t),l(c)?(c=c(),Z().then(f)):f())},invalidate(){p=0},end(){u&&(d(),u=0)}}}function ut(t,i,o){let r,c=i(t,o),u=1;const a=nt;function d(){const{delay:i=0,duration:o=300,easing:l=n,tick:d=e,css:f}=c||lt;f&&(r=O(t,1,0,o,i,l,f));const p=h()+i,m=p+o;F((()=>tt(t,0,"start"))),b((e=>{if(u){if(e>=m)return d(0,1),tt(t,0,"end"),--a.r||s(a.c),0;if(e>=p){const t=l((e-p)/o);d(1-t,t)}}return u}))}return a.r+=1,l(c)?Z().then((()=>{c=c(),d()})):d(),{end(e){e&&c.tick&&c.tick(1,0),u&&(r&&P(t,r),u=0)}}}function at(t,i,o,r){let c=i(t,o),u=r?0:1,a=null,d=null,f=null;function p(){f&&P(t,f)}function m(t,e){const n=t.b-u;return{a:u,b:t.b,d:n,duration:e*=Math.abs(n),start:t.start,end:t.start+e,group:t.group}}function g(i){const{delay:o=0,duration:r=300,easing:l=n,tick:g=e,css:$}=c||lt,y={start:h()+o,b:i};i||(y.group=nt,nt.r+=1),a||d?d=y:($&&(p(),f=O(t,u,i,r,o,l,$)),i&&g(0,1),a=m(y,r),F((()=>tt(t,i,"start"))),b((e=>(d&&e>d.start&&(a=m(d,r),d=null,tt(t,a.b,"start"),$&&(p(),f=O(t,u,a.b,a.duration,0,l,c.css))),a&&(a.end>e?a.start>e||(u=a.a+a.d*l((e-a.start)/a.duration),g(u,1-u)):(g(u=a.b,1-u),tt(t,a.b,"end"),d||(a.b?p():--a.group.r||s(a.group.c)),a=null)),!(!a&&!d)))))}return{run(t){l(c)?Z().then((()=>{c=c(),g(t)})):g(t)},end(){p(),a=d=null}}}const dt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ft(t){t&&t.c()}function pt(t,e,n,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:a}=t.$$;r&&r.m(e,n),i||F((()=>{const e=c.map(o).filter(l);u?u.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(F)}function mt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,n,i,o,l,c,u,a=[-1]){const d=R;W(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:a,skip_bound:0,root:n.target||d.$$.root};u&&u(f.root);let p=0;f.ctx=i?i(t,n.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),p&&function(t,e){-1===t.$$.dirty[0]&&(Y.push(t),U||(U=1,X.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],f.update(),p=1,s(f.before_update),f.fragment=o?o(f.ctx):0,n.target&&(f.fragment&&f.fragment.c(),n.intro&&rt(t.$$.fragment),pt(t,n.target,n.anchor,n.customElement),Q()),W(d)}class gt{$destroy(){mt(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&0!==Object.keys(t).length&&(this.$$.skip_bound=1,this.$$set(t),this.$$.skip_bound=0)}}function $t(t){const e=t-1;return e*e*e+1}function yt(t,{delay:e=0,duration:i=400,easing:o=n}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:o,css:t=>"opacity: "+t*r}}function bt(t,{delay:e=0,duration:n=400,easing:i=$t,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),c=+l.opacity,u="none"===l.transform?"":l.transform,a=c*(1-s);return{delay:e,duration:n,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${c-a*e}`}}const vt=[];function xt(t,n=e){let i;const o=new Set;function r(e){if(c(t,e)&&(t=e,i)){const e=!vt.length;for(const e of o)e[1](),vt.push(e,t);if(e){for(let t=0;vt.length>t;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:r,update(e){r(e(t))},subscribe(s,l=e){const c=[s,l];return o.add(c),1===o.size&&(i=n(r)||e),s(t),()=>{o.delete(c),0===o.size&&(i(),i=null)}}}}function wt(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(Array.isArray(t)){const n=e.map(((e,n)=>wt(t[n],e)));return t=>n.map((e=>e(t)))}if("number"===n){const n=e-t;return e=>t+e*n}}function _t(t,e={}){const o=xt(t);let r,s=t;function l(l,c){if(null==t)return o.set(t=l),Promise.resolve();s=l;let u=r,a=0,{delay:d=0,duration:f=400,easing:p=n,interpolate:m=wt}=i(i({},e),c);if(0===f)return u&&(u.abort(),u=null),o.set(t=s),Promise.resolve();const g=h()+d;let $;return r=b((e=>{if(g>e)return 1;a||($=m(t,l),"function"==typeof f&&(f=f(t,l)),a=1),u&&(u.abort(),u=null);const n=e-g;return n>f?(o.set(t=l),0):(o.set(t=$(p(n/f))),1)})),r.promise}return{set:l,update:(e,n)=>l(e(s,t),n),subscribe:o.subscribe}}const kt=xt(0),It=xt(0);function Ct(t){let e,n,i,o,r=!t[2]&&Et();return{c(){e=I("div"),r&&r.c(),H(e,"class","bp-load"),A(e,"background-image","url("+t[0]+")")},m(t,n){_(t,e,n),r&&r.m(e,null),o=1},p(n,i){(t=n)[2]?r&&(r.d(1),r=null):r||(r=Et(),r.c(),r.m(e,null)),(!o||1&i)&&A(e,"background-image","url("+t[0]+")")},i(r){o||(F((()=>{i&&i.end(1),n=ct(e,yt,{duration:t[2]?300:0}),n.start()})),o=1)},o(t){n&&n.invalidate(),t&&(i=ut(e,yt,{duration:200})),o=0},d(t){t&&k(e),r&&r.d(),t&&i&&i.end()}}}function Et(t){let e,n,i;return{c(){e=I("span"),n=E(),i=I("span"),H(e,"class","bp-bar"),H(i,"class","bp-o")},m(t,o){_(t,e,o),_(t,n,o),_(t,i,o)},d(t){t&&k(e),t&&k(n),t&&k(i)}}}function zt(t){let e,n=(!t[1]||t[2])&&Ct(t);return{c(){n&&n.c(),e=z()},m(t,i){n&&n.m(t,i),_(t,e,i)},p(t,[i]){!t[1]||t[2]?n?(n.p(t,i),6&i&&rt(n,1)):(n=Ct(t),n.c(),rt(n,1),n.m(e.parentNode,e)):n&&(it(),st(n,1,1,(()=>{n=null})),ot())},i(t){rt(n)},o(t){st(n)},d(t){n&&n.d(t),t&&k(e)}}}function Dt(t,e,n){let i;d(t,kt,(t=>n(2,i=t)));let{thumb:o}=e,{loaded:r}=e;return t.$$set=t=>{"thumb"in t&&n(0,o=t.thumb),"loaded"in t&&n(1,r=t.loaded)},[o,r,i]}class Ht extends gt{constructor(t){super(),ht(this,t,Dt,zt,c,{thumb:0,loaded:1})}}function St(t){let n,i,o;return{c(){n=I("img"),H(n,"srcset",t[5]),H(n,"sizes",t[6]),H(n,"alt",t[8])},m(t,e){_(t,n,e),o=1},p:e,i(t){o||(i&&i.end(1),o=1)},o(t){i=ut(n,yt,{}),o=0},d(t){t&&k(n),t&&i&&i.end()}}}function At(t){let e,n,i,o,r,l,c,u;o=new Ht({props:{thumb:t[7],loaded:t[2]}});let a=t[2]&&St(t);return{c(){e=I("div"),n=I("div"),i=I("div"),ft(o.$$.fragment),r=E(),a&&a.c(),A(i,"background-image","url("+t[7]+")"),A(i,"transform","translate3d("+t[4][0]+"px, "+t[4][1]+"px, 0px)"),H(n,"class","bp-item bp-img"),A(n,"width",t[0][0]+"px"),A(n,"height",t[0][1]+"px"),H(e,"class","bp-img-wrap"),T(e,"dragging",t[3])},m(s,d){_(s,e,d),v(e,n),v(n,i),pt(o,i,null),v(i,r),a&&a.m(i,null),t[24](e),l=1,c||(u=[D(window,"resize",t[23]),p(t[16].call(null,n)),D(e,"wheel",t[11],{passive:1}),D(e,"pointerdown",t[12]),D(e,"pointermove",t[13]),D(e,"pointerup",t[14]),D(e,"pointercancel",t[14])],c=1)},p(t,r){const s={};4&r[0]&&(s.loaded=t[2]),o.$set(s),t[2]?a?(a.p(t,r),4&r[0]&&rt(a,1)):(a=St(t),a.c(),rt(a,1),a.m(i,null)):a&&(it(),st(a,1,1,(()=>{a=null})),ot()),(!l||16&r[0])&&A(i,"transform","translate3d("+t[4][0]+"px, "+t[4][1]+"px, 0px)"),(!l||1&r[0])&&A(n,"width",t[0][0]+"px"),(!l||1&r[0])&&A(n,"height",t[0][1]+"px"),8&r[0]&&T(e,"dragging",t[3])},i(t){l||(rt(o.$$.fragment,t),rt(a),l=1)},o(t){st(o.$$.fragment,t),st(a),l=0},d(n){n&&k(e),mt(o),a&&a.d(),t[24](null),c=0,s(u)}}}function Tt(t,e,n){let i,o,r,s;d(t,It,(t=>n(38,r=t))),d(t,kt,(t=>n(22,s=t)));let l,c,u,a,p,m,h,g,$,y,b,{stuff:v}=e,{containerWidth:x}=e,{containerHeight:w}=e,{smallScreen:_}=e,{activeItem:k,calculateDimensions:I,loadImage:C,preloadNext:E,opts:z,prev:D,next:H,close:S,toggleControls:A}=v,{img:T,sizes:N,thumb:M,alt:R,width:L,height:O}=k,{inline:P}=z,W=+L,Y=+O,q=I(W,Y),B=[],X=[],U=0;const F=_t(q,{easing:$t});d(t,F,(t=>n(0,o=t)));const J=_t([0,0],{easing:$t});d(t,J,(t=>n(4,i=t)));const K=([t,e])=>{let n=(o[0]-x)/2,i=(o[1]-w)/2;return 0>n?t=0:t>n?_?(t=p?n+(t-n)/10:n)>n+20&&(a=1,D()):t=n:-1*n>t&&(_?-1*n-20>(t=p?-1*n-(-1*n-t)/10:-1*n)&&(a=1,H()):t=-1*n),0>i?e=0:e>i?e=i:-1*i>e&&(e=-1*i),[t,e]},G=(t,e=5)=>{let n=o[0]+o[0]*e,r=o[1]+o[1]*e;if(e>0&&n>W)n=W,r=Y;else if(0>e){let t=I(W,Y);if(t[0]>n)return f(F,o=t,o),void f(J,i=[0,0],i)}if(f(F,o=[n,r],o),1>e)return void f(J,i=K(i),i);let{x:s,y:l,width:c,height:u}=t.target.getBoundingClientRect(),a=t.clientX-s-c/2,d=t.clientY-l-u/2;s=-1*a*(n/c)+a,l=-1*d*(r/u)+d,f(J,i=K([s,l]),i)},Q=t=>[t.clientX,t.clientY],V=()=>{n(21,q=I(W,Y)),_||(f(F,o=q,o),f(J,i=[0,0],i))};return t.$$set=t=>{"stuff"in t&&n(17,v=t.stuff),"containerWidth"in t&&n(18,x=t.containerWidth),"containerHeight"in t&&n(19,w=t.containerHeight),"smallScreen"in t&&n(20,_=t.smallScreen)},t.$$.update=()=>{2097153&t.$$.dirty[0]&&f(It,r=o[0]>q[0],r),4194304&t.$$.dirty[0]&&s&&!z.intro&&f(J,i=[0,0],i)},[o,l,c,p,i,T,N,M,R,F,J,t=>{P&&!r||G(t,0>t.deltaY?.2:-.2)},t=>{if(2!==t.button){t.preventDefault(),n(3,p=1),B.push(t);let[e,o]=Q(t);h=e,g=o,$=i[0],y=i[1]}},t=>{if(B.length>1)return u=1,n(3,p=0),(t=>{B=B.map((e=>e.pointerId==t.pointerId?t:e));let[e,n]=B,i=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);U||(U=i),G(t,-.02*(U-i)),U=i})(t);if(a||!p)return;let[e,i]=Q(t);X.push({x:e,y:i}),e-=h,i-=g,r||(e>40&&(D(),a=1),-40>e&&(H(),a=1),-90>i&&!P&&(S(),a=1)),m=Math.hypot(e,i)>10,r&&m&&J.set(K([$+e,y+i]),{duration:0})},t=>{if(B=B.filter((e=>e.pointerId!=t.pointerId)),u)return u=B.length?1:0,void(U=0);if(!a&&p){if(t.target===l&&!P)return S();if(n(3,p=0),_?m||(b?(clearTimeout(b),G(t,r?-5:5),b=0):b=setTimeout((()=>{A(),b=0}),250)):r?m||G(t,-5):2>X.length&&!r&&G(t),X.length>2){let t;X=X.slice(-3);let e=X[1].x-X[2].x,n=X[1].y-X[2].y;Math.hypot(e,n)>5?(e=X[0].x-X[2].x,n=X[0].y-X[2].y,t=[i[0]-5*e,i[1]-5*n]):t=i,f(J,i=K(t),i)}m=0,X=[]}},V,()=>{C(k).then((()=>{let{width:t,height:e}=k.preload;W=t,Y=e,n(2,c=1),E()}))},v,x,w,_,q,s,()=>setTimeout(V,0),t=>{j[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}class Nt extends gt{constructor(t){super(),ht(this,t,Tt,At,c,{stuff:17,containerWidth:18,containerHeight:19,smallScreen:20},null,[-1,-1])}}function Mt(t){let e,n,i,o,r,l,c,a;return r=new Ht({props:{thumb:t[3],loaded:t[0]}}),{c(){var s,l;e=I("div"),n=I("iframe"),o=E(),ft(r.$$.fragment),H(n,"allow","autoplay; fullscreen"),s=n.src,l=i=t[2],u||(u=document.createElement("a")),u.href=l,s!==u.href&&H(n,"src",i),H(n,"title",t[4]),H(e,"class","bp-item bp-if"),A(e,"width",t[1][0]+"px"),A(e,"height",t[1][1]+"px")},m(i,s){_(i,e,s),v(e,n),v(e,o),pt(r,e,null),l=1,c||(a=[D(window,"resize",t[5]),D(n,"load",t[8])],c=1)},p(t,[n]){const i={};1&n&&(i.loaded=t[0]),r.$set(i),(!l||2&n)&&A(e,"width",t[1][0]+"px"),(!l||2&n)&&A(e,"height",t[1][1]+"px")},i(t){l||(rt(r.$$.fragment,t),l=1)},o(t){st(r.$$.fragment,t),l=0},d(t){t&&k(e),mt(r),c=0,s(a)}}}function Rt(t,e,n){let i,o,{activeItem:r}=e,{calculateDimensions:s}=e,{iframe:l,thumb:c,title:u}=r;const a=()=>{n(1,o=s(r.width,r.height))};return a(),t.$$set=t=>{"activeItem"in t&&n(6,r=t.activeItem),"calculateDimensions"in t&&n(7,s=t.calculateDimensions)},[i,o,l,c,u,a,r,s,()=>n(0,i=1)]}class Lt extends gt{constructor(t){super(),ht(this,t,Rt,Mt,c,{activeItem:6,calculateDimensions:7})}}function Ot(t){let e,n,i,o,r,l,c,u=t[2]+t[3]+"";return o=new Ht({props:{thumb:t[5],loaded:t[1]}}),{c(){e=I("div"),n=I("video"),i=E(),ft(o.$$.fragment),n.playsInline=1,n.controls=1,n.autoplay=1,A(n,"width",t[4][0]+"px"),A(n,"height",t[4][1]+"px"),H(e,"class","bp-item bp-vid")},m(s,a){_(s,e,a),v(e,n),n.innerHTML=u,v(e,i),pt(o,e,null),r=1,l||(c=[D(window,"resize",t[9]),D(n,"canplay",t[10])],l=1)},p(t,[e]){(!r||12&e)&&u!==(u=t[2]+t[3]+"")&&(n.innerHTML=u),(!r||16&e)&&A(n,"width",t[4][0]+"px"),(!r||16&e)&&A(n,"height",t[4][1]+"px");const i={};2&e&&(i.loaded=t[1]),o.$set(i)},i(t){r||(rt(o.$$.fragment,t),r=1)},o(t){st(o.$$.fragment,t),r=0},d(t){t&&k(e),mt(o),l=0,s(c)}}}function Pt(t,e,n){let i,{activeItem:o}=e,{calculateDimensions:r}=e,{video:s,thumb:l,tracks:c=[],width:u,height:a}=o;s=Array.isArray(s)?s:s.split(", "),c=Array.isArray(c)?c:JSON.parse(c),s=s.map((t=>`<source src="${t}" type="video/${t.match(/.(\w+)$/)[1]}">`)),c=c.map((t=>`<track${Object.keys(t).reduce(((e,n)=>e+` ${n}="${t[n]}"`),"")}>`));let d=r(u,a);return t.$$set=t=>{"activeItem"in t&&n(8,o=t.activeItem),"calculateDimensions"in t&&n(0,r=t.calculateDimensions)},[r,i,s,c,d,l,u,a,o,()=>n(4,d=r(u,a)),()=>n(1,i=1)]}class Wt extends gt{constructor(t){super(),ht(this,t,Pt,Ot,c,{activeItem:8,calculateDimensions:0})}}let Yt,jt,{documentElement:qt,body:Bt}=document;const{window:Xt}=dt;function Ut(n){let i,o,r,l,c,u,d,f,m,h,g=n[7].i,$=Vt(n),y=(!n[11]||!n[10])&&Zt(n);return{c(){i=I("div"),o=I("div"),l=E(),$.c(),c=E(),y&&y.c(),H(i,"class","bp-wrap"),T(i,"zoomed",n[14]),T(i,"bp-inline",n[12])},m(e,r){var s;_(e,i,r),v(i,o),v(i,l),$.m(i,null),v(i,c),y&&y.m(i,null),n[29](i),f=1,m||(h=[p((s=i,t||(t=new ResizeObserver((t=>{for(const e of t)e.target.dispatchEvent(new CustomEvent("fd:resize"))}))),t.observe(s),u={destroy(){t.unobserve(s)}})),D(i,"fd:resize",n[28]),p(d=n[22].call(null,i))],m=1)},p(t,o){n=t,128&o[0]&&a(g,g=n[7].i)?(it(),st($,1,1,e),ot(),$=Vt(n),$.c(),rt($),$.m(i,c)):$.p(n,o),n[11]&&n[10]?y&&(it(),st(y,1,1,(()=>{y=null})),ot()):y?(y.p(n,o),3072&o[0]&&rt(y,1)):(y=Zt(n),y.c(),rt(y,1),y.m(i,null)),16384&o[0]&&T(i,"zoomed",n[14]),4096&o[0]&&T(i,"bp-inline",n[12])},i(t){f||(F((()=>{r||(r=at(o,yt,{easing:$t,duration:480},1)),r.run(1)})),rt($),rt(y),f=1)},o(t){r||(r=at(o,yt,{easing:$t,duration:480},0)),r.run(0),st($),st(y),f=0},d(t){t&&k(i),t&&r&&r.end(),$.d(t),y&&y.d(),n[29](null),m=0,s(h)}}}function Ft(t){let n,i,o=t[7].html+"";return{c(){n=new N,i=z(),n.a=i},m(t,e){n.m(o,t,e),_(t,i,e)},p(t,e){128&e[0]&&o!==(o=t[7].html+"")&&n.p(o)},i:e,o:e,d(t){t&&k(i),t&&n.d()}}}function Jt(t){let e,n;return e=new Lt({props:{activeItem:t[7],calculateDimensions:t[16]}}),{c(){ft(e.$$.fragment)},m(t,i){pt(e,t,i),n=1},p(t,n){const i={};128&n[0]&&(i.activeItem=t[7]),e.$set(i)},i(t){n||(rt(e.$$.fragment,t),n=1)},o(t){st(e.$$.fragment,t),n=0},d(t){mt(e,t)}}}function Kt(t){let e,n;return e=new Wt({props:{activeItem:t[7],calculateDimensions:t[16]}}),{c(){ft(e.$$.fragment)},m(t,i){pt(e,t,i),n=1},p(t,n){const i={};128&n[0]&&(i.activeItem=t[7]),e.$set(i)},i(t){n||(rt(e.$$.fragment,t),n=1)},o(t){st(e.$$.fragment,t),n=0},d(t){mt(e,t)}}}function Gt(t){let e,n;return e=new Nt({props:{stuff:{activeItem:t[7],calculateDimensions:t[16],toggleControls:t[21],loadImage:t[18],preloadNext:t[17],next:t[4],prev:t[3],close:t[2],opts:t[5]},containerWidth:t[8],containerHeight:t[9],smallScreen:t[11]}}),{c(){ft(e.$$.fragment)},m(t,i){pt(e,t,i),n=1},p(t,n){const i={};160&n[0]&&(i.stuff={activeItem:t[7],calculateDimensions:t[16],toggleControls:t[21],loadImage:t[18],preloadNext:t[17],next:t[4],prev:t[3],close:t[2],opts:t[5]}),256&n[0]&&(i.containerWidth=t[8]),512&n[0]&&(i.containerHeight=t[9]),2048&n[0]&&(i.smallScreen=t[11]),e.$set(i)},i(t){n||(rt(e.$$.fragment,t),n=1)},o(t){st(e.$$.fragment,t),n=0},d(t){mt(e,t)}}}function Qt(t){let e,n,i,o=t[7].caption+"";return{c(){e=I("div"),H(e,"class","bp-cap")},m(t,n){_(t,e,n),e.innerHTML=o,i=1},p(t,n){(!i||128&n[0])&&o!==(o=t[7].caption+"")&&(e.innerHTML=o)},i(t){i||(F((()=>{n||(n=at(e,yt,{duration:200},1)),n.run(1)})),i=1)},o(t){n||(n=at(e,yt,{duration:200},0)),n.run(0),i=0},d(t){t&&k(e),t&&n&&n.end()}}}function Vt(t){let e,n,i,o,r,l,c,u,a,d;const f=[Gt,Kt,Jt,Ft],p=[];function m(t,e){return t[7].img?0:t[7].video?1:t[7].iframe?2:3}n=m(t),i=p[n]=f[n](t);let h=t[7].caption&&Qt(t);return{c(){e=I("div"),i.c(),l=E(),h&&h.c(),c=z(),H(e,"class","bp-inner")},m(i,o){var r;_(i,e,o),p[n].m(e,null),_(i,l,o),h&&h.m(i,o),_(i,c,o),u=1,a||(d=[D(e,"pointerdown",t[26]),D(e,"pointerup",(r=t[27],function(t){t.target===this&&r.call(this,t)}))],a=1)},p(t,o){let r=n;n=m(t),n===r?p[n].p(t,o):(it(),st(p[r],1,1,(()=>{p[r]=null})),ot(),i=p[n],i?i.p(t,o):(i=p[n]=f[n](t),i.c()),rt(i,1),i.m(e,null)),t[7].caption?h?(h.p(t,o),128&o[0]&&rt(h,1)):(h=Qt(t),h.c(),rt(h,1),h.m(c.parentNode,c)):h&&(it(),st(h,1,1,(()=>{h=null})),ot())},i(n){u||(rt(i),F((()=>{r&&r.end(1),o=ct(e,t[19],{}),o.start()})),rt(h),u=1)},o(n){st(i),o&&o.invalidate(),r=ut(e,t[20],{}),st(h),u=0},d(t){t&&k(e),p[n].d(),t&&r&&r.end(),t&&k(l),h&&h.d(t),t&&k(c),a=0,s(d)}}}function Zt(t){let e,n,i,o,r=!t[5].noClose&&te(t),s=t[0].length>1&&ee(t);return{c(){e=I("div"),r&&r.c(),n=E(),s&&s.c()},m(t,i){_(t,e,i),r&&r.m(e,null),v(e,n),s&&s.m(e,null),o=1},p(t,i){t[5].noClose?r&&(r.d(1),r=null):r?r.p(t,i):(r=te(t),r.c(),r.m(e,n)),t[0].length>1?s?s.p(t,i):(s=ee(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){o||(F((()=>{i||(i=at(e,yt,{duration:300},1)),i.run(1)})),o=1)},o(t){i||(i=at(e,yt,{duration:300},0)),i.run(0),o=0},d(t){t&&k(e),r&&r.d(),s&&s.d(),t&&i&&i.end()}}}function te(t){let n,i,o;return{c(){n=I("button"),H(n,"class","bp-x"),H(n,"title","Close")},m(e,r){_(e,n,r),i||(o=D(n,"click",t[2]),i=1)},p:e,d(t){t&&k(n),i=0,o()}}}function ee(t){let e,n,i,o,r,l,c,u,a,d,f=t[1]+1+"",p=t[0].length+"";return{c(){e=I("div"),n=C(f),i=C(" / "),o=C(p),r=E(),l=I("button"),c=E(),u=I("button"),H(e,"class","bp-count"),H(l,"class","bp-next"),H(l,"title","Next"),H(u,"class","bp-prev"),H(u,"title","Previous")},m(s,f){_(s,e,f),v(e,n),v(e,i),v(e,o),_(s,r,f),_(s,l,f),_(s,c,f),_(s,u,f),a||(d=[D(l,"click",t[4]),D(u,"click",t[3])],a=1)},p(t,e){2&e[0]&&f!==(f=t[1]+1+"")&&S(n,f),1&e[0]&&p!==(p=t[0].length+"")&&S(o,p)},d(t){t&&k(e),t&&k(r),t&&k(l),t&&k(c),t&&k(u),a=0,s(d)}}}function ne(t){let e,n,i,o,r=t[0]&&Ut(t);return{c(){r&&r.c(),e=z()},m(s,l){r&&r.m(s,l),_(s,e,l),n=1,i||(o=D(Xt,"keydown",t[15]),i=1)},p(t,n){t[0]?r?(r.p(t,n),1&n[0]&&rt(r,1)):(r=Ut(t),r.c(),rt(r,1),r.m(e.parentNode,e)):r&&(it(),st(r,1,1,(()=>{r=null})),ot())},i(t){n||(rt(r),n=1)},o(t){st(r),n=0},d(t){r&&r.d(t),t&&k(e),i=0,o()}}}function ie(t,e,n){let i,o;d(t,kt,(t=>n(33,i=t))),d(t,It,(t=>n(14,o=t)));let r,s,l,c,u,a,p,m,h,g,$,y,{items:b}=e,{position:v}=e,{target:x}=e;const w=()=>{r.noClose||(r.onClose&&r.onClose(),f(kt,i=1,i),n(0,b=0),l&&l.focus({preventScroll:1}))},_=()=>I(v-1),k=()=>I(v+1),I=t=>{g=t-v,n(1,v=C(t))},C=t=>(t===b.length?t=0:0>t&&(t=b.length-1),t),E=t=>{let{img:e,sizes:n}=t;if(!e)return;let i=new Image;return n&&(i.sizes=n),i.srcset=e,t.preload=i,i.decode()},z=t=>{let{element:e}=y,n=t.querySelector(".bp-item"),{clientWidth:i,clientHeight:o}=n,{top:r,left:s,width:l,height:c}=e.getBoundingClientRect(),d=s-(u-l)/2,f=r-(a-c)/2,p=e.clientWidth/i,m=e.clientHeight/o;return{duration:470,delay:10,easing:$t,css(t){let e=1-t;return`transform:translate3d(${d*e}px, ${f*e}px, 0px) scale3d(${p+t*(1-p)}, ${m+t*(1-m)}, 1)`}}},D=()=>{n(11,m=769>u),r.onResize&&r.onResize(y)};return t.$$set=t=>{"items"in t&&n(0,b=t.items),"position"in t&&n(1,v=t.position),"target"in t&&n(23,x=t.target)},t.$$.update=()=>{227&t.$$.dirty[0]&&b&&(n(7,y=b[v]),c&&r.onUpdate&&r.onUpdate(c,y))},[b,v,w,_,k,r,c,y,u,a,p,m,h,$,o,t=>{if(!s||h)return;let{key:e}=t;if("Escape"===e)w();else if("ArrowRight"===e)k();else if("ArrowLeft"===e)_();else if("Tab"===e){t.preventDefault();let e=[...(r.focusWrap||c).querySelectorAll("*")].filter((t=>t.tabIndex>=0)),n=e.indexOf(document.activeElement);n+=e.length+(t.shiftKey?-1:1),n%=e.length,e[n].focus()}},(t,e,n)=>{let i,o;n=r.scale||.99;const s=(e=e||1080)/(t=t||1920);return s>a/u?(o=Math.min(e,a*n),i=o/s):(i=Math.min(t,u*n),o=i*s),[i,o]},()=>{let t=b[C(v+1)],e=b[C(v-1)];!t.preload&&E(t),!e.preload&&E(e)},E,t=>s?bt(t,{x:g>0?20:-20,easing:$t,duration:300}):(s=1,r.onOpen&&r.onOpen(c),r.intro?bt(t,{y:10,easing:$t}):z(t)),t=>b?bt(t,{x:g>0?-20:20,easing:$t,duration:300}):r.intro?bt(t,{y:-10,easing:$t}):z(t),()=>n(10,p=!p),()=>(window.addEventListener("resize",D),{destroy(){window.removeEventListener("resize",D),f(kt,i=s=0,i),qt.style.overflowY=Yt,Bt.style.overflowY=Yt,r.onClosed&&r.onClosed()}}),x,t=>{let e=t.items;l=document.activeElement,n(5,r=t),n(12,h=r.inline),h||qt.scrollHeight>qt.clientHeight&&(Yt=Yt||getComputedStyle(qt).overflowY,jt=jt||getComputedStyle(Bt).overflowY,qt.style.overflowY="hidden",Bt.style.overflowY="scroll"),n(8,u=x.offsetWidth),n(9,a=x===document.body?window.innerHeight:x.clientHeight),n(11,m=769>u),n(1,v=r.position||0),n(10,p=0),n(0,b=Array.isArray(e)?e.map(((t,e)=>({...t,i:e}))):[...e.length?e:[e]].map(((t,e)=>{let i={element:t,i:e};return t===r.el&&n(1,v=e),{...i,...t.dataset}})))},I,({target:t})=>n(13,$=t),({target:t})=>{t===$&&w()},t=>{n(9,a=t.target.clientHeight),n(8,u=t.target.clientWidth)},t=>{j[t?"unshift":"push"]((()=>{c=t,n(6,c)}))}]}class oe extends gt{constructor(t){super(),ht(this,t,ie,ne,a,{items:0,position:1,target:23,open:24,close:2,prev:3,next:4,setPosition:25},null,[-1,-1])}get items(){return this.$$.ctx[0]}set items(t){this.$$set({items:t}),Q()}get position(){return this.$$.ctx[1]}set position(t){this.$$set({position:t}),Q()}get target(){return this.$$.ctx[23]}set target(t){this.$$set({target:t}),Q()}get open(){return this.$$.ctx[24]}get close(){return this.$$.ctx[2]}get prev(){return this.$$.ctx[3]}get next(){return this.$$.ctx[4]}get setPosition(){return this.$$.ctx[25]}}return t=>new oe({...t,intro:1,props:t})}));
