((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).BiggerPicture=e()})(this,(function(){var t;function e(){}const n=t=>t;function i(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function u(t,e){return t!=t?e==e:t!==e}function a(t,n,i){t.$$.on_destroy.push(((t,...n)=>{if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i})(n,i))}function d(t,e,n){return t.set(n),e}function f(t){return t&&s(t.destroy)?t.destroy:e}let p=()=>window.performance.now(),m=t=>requestAnimationFrame(t);const h=new Set;function g(t){h.forEach((e=>{e.c(t)||(h.delete(e),e.f())})),0!==h.size&&m(g)}function $(t){let e;return 0===h.size&&m(g),{promise:new Promise((n=>{h.add(e={c:t,f:n})})),abort(){h.delete(e)}}}function b(t,e){t.appendChild(e)}function y(t){const e=w("style");return((t,e)=>{b(t.head||t,e)})(document,e),e.sheet}function v(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function _(t){return document.createTextNode(t)}function k(){return _("")}function I(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){t.wholeText!==(e=""+e)&&(t.data=e)}function z(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function D(t,e,n){t.classList[n?"add":"remove"](e)}class H{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=w(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;this.n.length>e;e+=1)v(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(x)}}const M=new Map;let S,A=0;function N(t,e,n,i,o,r,s,l=0){const c=16.666/i;let u="{\n";for(let t=0;1>=t;t+=c){const i=e+(n-e)*r(t);u+=100*t+`%{${s(i,1-i)}}\n`}const a=u+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${(t=>{let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0})(a)}_${l}`,f=(t=>{if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument})(t),{stylesheet:p,rules:m}=M.get(f)||((t,e)=>{const n={stylesheet:y(),rules:{}};return M.set(t,n),n})(f);m[d]||(m[d]=1,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?h+", ":""}${d} ${i}ms linear ${o}ms 1 both`,A+=1,d}function T(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>0>t.indexOf(e):t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),A-=o,A||m((()=>{A||(M.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),M.clear())})))}function P(t){S=t}const R=[],L=[],W=[],Y=[],O=Promise.resolve();let j=0;function q(t){W.push(t)}const B=new Set;let X,U=0;function Z(){const t=S;do{for(;R.length>U;){const t=R[U];U++,P(t),F(t.$$)}for(P(null),R.length=0,U=0;L.length;)L.pop()();for(let t=0;W.length>t;t+=1){const e=W[t];B.has(e)||(B.add(e),e())}W.length=0}while(R.length);for(;Y.length;)Y.pop()();j=0,B.clear(),P(t)}function F(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}function J(){return X||(X=Promise.resolve(),X.then((()=>{X=null}))),X}function K(t,e,n){t.dispatchEvent(((t,e,n=0)=>{const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,0,e),i})(`${e?"intro":"outro"}${n}`))}const G=new Set;let Q;function V(){Q={r:0,c:[],p:Q}}function tt(){Q.r||r(Q.c),Q=Q.p}function et(t,e){t&&t.i&&(G.delete(t),t.i(e))}function nt(t,e,n,i){if(t&&t.o){if(G.has(t))return;G.add(t),Q.c.push((()=>{G.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const it={duration:0};function ot(t,i,o){let r,l,c=i(t,o),u=0,a=0;function d(){r&&T(t,r)}function f(){const{delay:i=0,duration:o=300,easing:s=n,tick:f=e,css:m}=c||it;m&&(r=N(t,0,1,o,i,s,m,a++)),f(0,1);const h=p()+i,g=h+o;l&&l.abort(),u=1,q((()=>K(t,1,"start"))),l=$((e=>{if(u){if(e>=g)return f(1,0),K(t,1,"end"),d(),u=0;if(e>=h){const t=s((e-h)/o);f(t,1-t)}}return u}))}let m=0;return{start(){m||(m=1,T(t),s(c)?(c=c(),J().then(f)):f())},invalidate(){m=0},end(){u&&(d(),u=0)}}}function rt(t,i,o){let l,c=i(t,o),u=1;const a=Q;function d(){const{delay:i=0,duration:o=300,easing:s=n,tick:d=e,css:f}=c||it;f&&(l=N(t,1,0,o,i,s,f));const m=p()+i,h=m+o;q((()=>K(t,0,"start"))),$((e=>{if(u){if(e>=h)return d(0,1),K(t,0,"end"),--a.r||r(a.c),0;if(e>=m){const t=s((e-m)/o);d(1-t,t)}}return u}))}return a.r+=1,s(c)?J().then((()=>{c=c(),d()})):d(),{end(e){e&&c.tick&&c.tick(1,0),u&&(l&&T(t,l),u=0)}}}function st(t,i,o,l){let c=i(t,o),u=l?0:1,a=null,d=null,f=null;function m(){f&&T(t,f)}function h(t,e){const n=t.b-u;return{a:u,b:t.b,d:n,duration:e*=Math.abs(n),start:t.start,end:t.start+e,group:t.group}}function g(i){const{delay:o=0,duration:s=300,easing:l=n,tick:g=e,css:b}=c||it,y={start:p()+o,b:i};i||(y.group=Q,Q.r+=1),a||d?d=y:(b&&(m(),f=N(t,u,i,s,o,l,b)),i&&g(0,1),a=h(y,s),q((()=>K(t,i,"start"))),$((e=>(d&&e>d.start&&(a=h(d,s),d=null,K(t,a.b,"start"),b&&(m(),f=N(t,u,a.b,a.duration,0,l,c.css))),a&&(a.end>e?a.start>e||(u=a.a+a.d*l((e-a.start)/a.duration),g(u,1-u)):(g(u=a.b,1-u),K(t,a.b,"end"),d||(a.b?m():--a.group.r||r(a.group.c)),a=null)),!(!a&&!d)))))}return{run(t){s(c)?J().then((()=>{c=c(),g(t)})):g(t)},end(){m(),a=d=null}}}const lt=window;function ct(t){t&&t.c()}function ut(t,e,n,i){const{fragment:l,on_mount:c,on_destroy:u,after_update:a}=t.$$;l&&l.m(e,n),i||q((()=>{const e=c.map(o).filter(s);u?u.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(q)}function at(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,n,i,o,s,l,c,u=[-1]){const a=S;P(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:{},on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(a?a.$$.context:[])),callbacks:{},dirty:u,skip_bound:0,root:n.target||a.$$.root};c&&c(d.root);let f=0;d.ctx=i?i(t,n.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),f&&function(t,e){-1===t.$$.dirty[0]&&(R.push(t),j||(j=1,O.then(Z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],d.update(),f=1,r(d.before_update),d.fragment=o?o(d.ctx):0,n.target&&(d.fragment&&d.fragment.c(),n.intro&&et(t.$$.fragment),ut(t,n.target,n.anchor,n.customElement),Z()),P(a)}class ft{$destroy(){at(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&0!==Object.keys(t).length&&(this.$$.skip_bound=1,this.$$set(t),this.$$.skip_bound=0)}}function pt(t){const e=t-1;return e*e*e+1}function mt(t,{delay:e=0,duration:i=400,easing:o=n}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:o,css:t=>"opacity: "+t*r}}function ht(t,{delay:e=0,duration:n=400,easing:i=pt,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),c=+l.opacity,u="none"===l.transform?"":l.transform,a=c*(1-s);return{delay:e,duration:n,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${c-a*e}`}}const gt=[];function $t(t,n=e){let i;const o=new Set;function r(e){if(l(t,e)&&(t=e,i)){const e=!gt.length;for(const e of o)e[1](),gt.push(e,t);if(e){for(let t=0;gt.length>t;t+=2)gt[t][0](gt[t+1]);gt.length=0}}}return{set:r,update(e){r(e(t))},subscribe(s,l=e){const c=[s,l];return o.add(c),1===o.size&&(i=n(r)||e),s(t),()=>{o.delete(c),0===o.size&&(i(),i=null)}}}}function bt(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(Array.isArray(t)){const n=e.map(((e,n)=>bt(t[n],e)));return t=>n.map((e=>e(t)))}if("number"===n){const n=e-t;return e=>t+e*n}}function yt(t,e={}){const o=$t(t);let r,s=t;function l(l,c){if(null==t)return o.set(t=l),Promise.resolve();s=l;let u=r,a=0,{delay:d=0,duration:f=400,easing:m=n,interpolate:h=bt}=i(i({},e),c);if(0===f)return u&&(u.abort(),u=null),o.set(t=s),Promise.resolve();const g=p()+d;let b;return r=$((e=>{if(g>e)return 1;a||(b=h(t,l),"function"==typeof f&&(f=f(t,l)),a=1),u&&(u.abort(),u=null);const n=e-g;return n>f?(o.set(t=l),0):(o.set(t=b(m(n/f))),1)})),r.promise}return{set:l,update:(e,n)=>l(e(s,t),n),subscribe:o.subscribe}}const vt=$t(0),xt=$t(0),wt=matchMedia("(prefers-reduced-motion: reduce)").matches;function _t(t){let e,n,i,o,r=!t[2]&&kt();return{c(){e=w("div"),r&&r.c(),C(e,"class","bp-load"),z(e,"background-image","url("+t[0]+")")},m(t,n){v(t,e,n),r&&r.m(e,null),o=1},p(n,i){(t=n)[2]?r&&(r.d(1),r=null):r||(r=kt(),r.c(),r.m(e,null)),(!o||1&i)&&z(e,"background-image","url("+t[0]+")")},i(r){o||(q((()=>{i&&i.end(1),n=ot(e,mt,{duration:t[2]?300:0}),n.start()})),o=1)},o(t){n&&n.invalidate(),t&&(i=rt(e,mt,{duration:200})),o=0},d(t){t&&x(e),r&&r.d(),t&&i&&i.end()}}}function kt(t){let e,n;return{c(){e=w("span"),n=w("span"),C(e,"class","bp-bar"),C(n,"class","bp-o")},m(t,i){v(t,e,i),v(t,n,i)},d(t){t&&x(e),t&&x(n)}}}function It(t){let e,n=(!t[1]||t[2])&&_t(t);return{c(){n&&n.c(),e=k()},m(t,i){n&&n.m(t,i),v(t,e,i)},p(t,[i]){!t[1]||t[2]?n?(n.p(t,i),6&i&&et(n,1)):(n=_t(t),n.c(),et(n,1),n.m(e.parentNode,e)):n&&(V(),nt(n,1,1,(()=>{n=null})),tt())},i(t){et(n)},o(t){nt(n)},d(t){n&&n.d(t),t&&x(e)}}}function Ct(t,e,n){let i;a(t,vt,(t=>n(2,i=t)));let{thumb:o}=e,{loaded:r}=e;return t.$$set=t=>{"thumb"in t&&n(0,o=t.thumb),"loaded"in t&&n(1,r=t.loaded)},[o,r,i]}class Et extends ft{constructor(t){super(),dt(this,t,Ct,It,l,{thumb:0,loaded:1})}}function zt(t){let e,n,i,o;return{c(){e=w("img"),C(e,"srcset",t[7]),C(e,"sizes",n=t[6].sizes||t[1]+"px"),C(e,"alt",t[9])},m(t,n){v(t,e,n),o=1},p(t,i){(!o||2&i[0]&&n!==(n=t[6].sizes||t[1]+"px"))&&C(e,"sizes",n)},i(t){o||(i&&i.end(1),o=1)},o(t){i=rt(e,mt,{}),o=0},d(t){t&&x(e),t&&i&&i.end()}}}function Dt(t){let e,n,i,o,s,l,c;o=new Et({props:{thumb:t[8],loaded:t[3]}});let u=t[3]&&zt(t);return{c(){e=w("div"),n=w("div"),i=w("div"),ct(o.$$.fragment),u&&u.c(),z(i,"background-image","url("+t[8]+")"),z(i,"transform","translate3d("+t[5][0]+"px, "+t[5][1]+"px, 0px)"),C(n,"class","bp-item bp-img"),z(n,"width",t[0][0]+"px"),z(n,"height",t[0][1]+"px"),C(e,"class","bp-img-wrap"),D(e,"dragging",t[4])},m(r,a){v(r,e,a),b(e,n),b(n,i),ut(o,i,null),u&&u.m(i,null),t[25](e),s=1,l||(c=[I(window,"resize",t[24]),f(t[17].call(null,n)),I(e,"wheel",t[12]),I(e,"pointerdown",t[13]),I(e,"pointermove",t[14]),I(e,"pointerup",t[15]),I(e,"pointercancel",t[15])],l=1)},p(t,r){const l={};8&r[0]&&(l.loaded=t[3]),o.$set(l),t[3]?u?(u.p(t,r),8&r[0]&&et(u,1)):(u=zt(t),u.c(),et(u,1),u.m(i,null)):u&&(V(),nt(u,1,1,(()=>{u=null})),tt()),(!s||32&r[0])&&z(i,"transform","translate3d("+t[5][0]+"px, "+t[5][1]+"px, 0px)"),(!s||1&r[0])&&z(n,"width",t[0][0]+"px"),(!s||1&r[0])&&z(n,"height",t[0][1]+"px"),16&r[0]&&D(e,"dragging",t[4])},i(t){s||(et(o.$$.fragment,t),et(u),s=1)},o(t){nt(o.$$.fragment,t),nt(u),s=0},d(n){n&&x(e),at(o),u&&u.d(),t[25](null),l=0,r(c)}}}function Ht(t,e,n){let i,o,r,s;a(t,xt,(t=>n(37,o=t))),a(t,vt,(t=>n(23,s=t)));let l,c,u,f,p,m,h,g,$,b,y,{stuff:v}=e,{containerWidth:x}=e,{containerHeight:w}=e,{smallScreen:_}=e,{activeItem:k,calculateDimensions:I,loadImage:C,preloadNext:E,opts:z,prev:D,next:H,close:M,toggleControls:S}=v,{inline:A}=z,{img:N,thumb:T,alt:P,width:R,height:W}=k,Y=k.maxZoom||z.maxZoom||10,O=+R,j=+W,q=I(O,j),B=q[0],X=[],U=[],Z=0,F={easing:pt,duration:wt?0:400};const J=yt(q,F);a(t,J,(t=>n(0,r=t)));const K=yt([0,0],F);a(t,K,(t=>n(5,i=t)));const G=([t,e],n=r)=>{let i=(n[0]-x)/2,o=(n[1]-w)/2;return 0>i?t=0:t>i?_?(t=p?i+(t-i)/10:i)>i+20&&(f=1,D()):t=i:-1*i>t&&(_?-1*i-20>(t=p?-1*i-(-1*i-t)/10:-1*i)&&(f=1,H()):t=-1*i),0>o?e=0:e>o?e=o:-1*o>e&&(e=-1*o),[t,e]},Q=(t,e=5)=>{let o=I(O,j),s=o[0]*Y,[l,c]=r,u=l+l*e,a=c+c*e;if(e>0)u>s&&(u=s,a=o[1]*Y),u>O&&(u=O,a=j);else if(o[0]>u)return J.set(o),void K.set([0,0]);let{x:d,y:f,width:p,height:m}=t.target.getBoundingClientRect(),h=t.clientX-d-p/2,g=t.clientY-f-m/2;d=-1*h*(u/p)+h,f=-1*g*(a/m)+g;let $=[u,a];J.set($).then((()=>{n(1,B=Math.round(Math.max(B,u)))})),K.set(G([i[0]+d,i[1]+f],$))},V=t=>[t.clientX,t.clientY],tt=()=>{n(22,q=I(O,j)),_||(J.set(q),K.set([0,0]))};return t.$$set=t=>{"stuff"in t&&n(18,v=t.stuff),"containerWidth"in t&&n(19,x=t.containerWidth),"containerHeight"in t&&n(20,w=t.containerHeight),"smallScreen"in t&&n(21,_=t.smallScreen)},t.$$.update=()=>{4194305&t.$$.dirty[0]&&d(xt,o=r[0]>q[0],o),8388608&t.$$.dirty[0]&&s&&!z.intro&&d(K,i=[0,0],i)},[r,B,l,c,p,i,z,N,T,P,J,K,t=>{if(A&&!o)return;t.preventDefault(),Q(t,t.deltaY/-300)},t=>{if(2!==t.button){t.preventDefault(),n(4,p=1),X.push(t);let[e,o]=V(t);h=e,g=o,$=i[0],b=i[1]}},t=>{if(X.length>1)return u=1,n(4,p=0),(t=>{X=X.map((e=>e.pointerId==t.pointerId?t:e));let[e,n]=X,i=Math.hypot(e.clientX-n.clientX,e.clientY-n.clientY);Z||(Z=i),Q(t,-.015*(Z-i)),Z=i})(t);if(f||!p)return;let[e,i]=V(t);U.push({x:e,y:i}),e-=h,i-=g,o||(e>40&&(D(),f=1),-40>e&&(H(),f=1),-90>i&&!A&&(M(),f=1)),m=Math.hypot(e,i)>10,o&&m&&K.set(G([$+e,b+i]),{duration:0})},t=>{if(X=X.filter((e=>e.pointerId!=t.pointerId)),u)return u=X.length?1:0,void(Z=0);if(!f&&p){if(t.target===l&&!A)return M();if(n(4,p=0),_?m||(y?(clearTimeout(y),Q(t,o?-5:5),y=0):y=setTimeout((()=>{S(),y=0}),250)):o?m||Q(t,-5):2>U.length&&!o&&Q(t),m){let t;U=U.slice(-3);let e=U[1].x-U[2].x,n=U[1].y-U[2].y;Math.hypot(e,n)>5?(e=U[0].x-U[2].x,n=U[0].y-U[2].y,t=[i[0]-5*e,i[1]-5*n]):t=i,K.set(G(t))}m=0,U=[]}},tt,()=>{C(k).then((()=>{n(3,c=1),E()}))},v,x,w,_,q,s,()=>setTimeout(tt,0),t=>{L[t?"unshift":"push"]((()=>{l=t,n(2,l)}))}]}class Mt extends ft{constructor(t){super(),dt(this,t,Ht,Dt,l,{stuff:18,containerWidth:19,containerHeight:20,smallScreen:21},null,[-1,-1])}}function St(t){let e,n,i,o,s,l,u;return o=new Et({props:{thumb:t[3],loaded:t[0]}}),{c(){var r,s;e=w("div"),n=w("iframe"),ct(o.$$.fragment),C(n,"allow","autoplay; fullscreen"),r=n.src,s=i=t[2],c||(c=document.createElement("a")),c.href=s,r!==c.href&&C(n,"src",i),C(n,"title",t[4]),C(e,"class","bp-item bp-if"),z(e,"width",t[1][0]+"px"),z(e,"height",t[1][1]+"px")},m(i,r){v(i,e,r),b(e,n),ut(o,e,null),s=1,l||(u=[I(window,"resize",t[5]),I(n,"load",t[8])],l=1)},p(t,[n]){const i={};1&n&&(i.loaded=t[0]),o.$set(i),(!s||2&n)&&z(e,"width",t[1][0]+"px"),(!s||2&n)&&z(e,"height",t[1][1]+"px")},i(t){s||(et(o.$$.fragment,t),s=1)},o(t){nt(o.$$.fragment,t),s=0},d(t){t&&x(e),at(o),l=0,r(u)}}}function At(t,e,n){let i,o,{activeItem:r}=e,{calculateDimensions:s}=e,{iframe:l,thumb:c,title:u}=r;const a=()=>{n(1,o=s(r.width,r.height))};return a(),t.$$set=t=>{"activeItem"in t&&n(6,r=t.activeItem),"calculateDimensions"in t&&n(7,s=t.calculateDimensions)},[i,o,l,c,u,a,r,s,()=>n(0,i=1)]}class Nt extends ft{constructor(t){super(),dt(this,t,At,St,l,{activeItem:6,calculateDimensions:7})}}function Tt(t){let e,n,i,o,s,l,c=t[2]+t[3]+"";return i=new Et({props:{thumb:t[5],loaded:t[1]}}),{c(){e=w("div"),n=w("video"),ct(i.$$.fragment),n.playsInline=1,n.controls=1,n.autoplay=1,C(n,"tabindex","0"),z(n,"width",t[4][0]+"px"),z(n,"height",t[4][1]+"px"),C(e,"class","bp-item bp-vid")},m(r,u){v(r,e,u),b(e,n),n.innerHTML=c,ut(i,e,null),o=1,s||(l=[I(window,"resize",t[9]),I(n,"canplay",t[10])],s=1)},p(t,[e]){(!o||12&e)&&c!==(c=t[2]+t[3]+"")&&(n.innerHTML=c),(!o||16&e)&&z(n,"width",t[4][0]+"px"),(!o||16&e)&&z(n,"height",t[4][1]+"px");const r={};2&e&&(r.loaded=t[1]),i.$set(r)},i(t){o||(et(i.$$.fragment,t),o=1)},o(t){nt(i.$$.fragment,t),o=0},d(t){t&&x(e),at(i),s=0,r(l)}}}function Pt(t,e,n){let i,{activeItem:o}=e,{calculateDimensions:r}=e,{video:s,thumb:l,tracks:c=[],width:u,height:a}=o;s=Array.isArray(s)?s:s.split(", "),c=Array.isArray(c)?c:JSON.parse(c),s=s.map((t=>`<source src="${t}" type="video/${t.match(/.(\w+)$/)[1]}">`)),c=c.map((t=>`<track${Object.keys(t).reduce(((e,n)=>e+` ${n}="${t[n]}"`),"")}>`));let d=r(u,a);return t.$$set=t=>{"activeItem"in t&&n(8,o=t.activeItem),"calculateDimensions"in t&&n(0,r=t.calculateDimensions)},[r,i,s,c,d,l,u,a,o,()=>n(4,d=r(u,a)),()=>n(1,i=1)]}class Rt extends ft{constructor(t){super(),dt(this,t,Pt,Tt,l,{activeItem:8,calculateDimensions:0})}}let Lt,Wt,{documentElement:Yt,body:Ot}=document;const{window:jt}=lt;function qt(n){let i,o,s,l,c,a,d,p,m,h=n[7].i,g=Jt(n),$=(!n[11]||!n[10])&&Kt(n);return{c(){i=w("div"),o=w("div"),g.c(),l=k(),$&&$.c(),C(i,"class","bp-wrap"),D(i,"zoomed",n[14]),D(i,"bp-inline",n[12])},m(e,r){var s;v(e,i,r),b(i,o),g.m(i,null),b(i,l),$&&$.m(i,null),n[29](i),d=1,p||(m=[f((s=i,t||(t=new ResizeObserver((t=>{for(const e of t)e.target.dispatchEvent(new CustomEvent("fd:resize"))}))),t.observe(s),c={destroy(){t.unobserve(s)}})),I(i,"fd:resize",n[28]),f(a=n[22].call(null,i))],p=1)},p(t,o){n=t,128&o[0]&&u(h,h=n[7].i)?(V(),nt(g,1,1,e),tt(),g=Jt(n),g.c(),et(g),g.m(i,l)):g.p(n,o),n[11]&&n[10]?$&&(V(),nt($,1,1,(()=>{$=null})),tt()):$?($.p(n,o),3072&o[0]&&et($,1)):($=Kt(n),$.c(),et($,1),$.m(i,null)),16384&o[0]&&D(i,"zoomed",n[14]),4096&o[0]&&D(i,"bp-inline",n[12])},i(t){d||(q((()=>{s||(s=st(o,mt,{easing:pt,duration:480},1)),s.run(1)})),et(g),et($),d=1)},o(t){s||(s=st(o,mt,{easing:pt,duration:480},0)),s.run(0),nt(g),nt($),d=0},d(t){t&&x(i),t&&s&&s.end(),g.d(t),$&&$.d(),n[29](null),p=0,r(m)}}}function Bt(t){let n,i,o=t[7].html+"";return{c(){n=new H,i=k(),n.a=i},m(t,e){n.m(o,t,e),v(t,i,e)},p(t,e){128&e[0]&&o!==(o=t[7].html+"")&&n.p(o)},i:e,o:e,d(t){t&&x(i),t&&n.d()}}}function Xt(t){let e,n;return e=new Nt({props:{activeItem:t[7],calculateDimensions:t[16]}}),{c(){ct(e.$$.fragment)},m(t,i){ut(e,t,i),n=1},p(t,n){const i={};128&n[0]&&(i.activeItem=t[7]),e.$set(i)},i(t){n||(et(e.$$.fragment,t),n=1)},o(t){nt(e.$$.fragment,t),n=0},d(t){at(e,t)}}}function Ut(t){let e,n;return e=new Rt({props:{activeItem:t[7],calculateDimensions:t[16]}}),{c(){ct(e.$$.fragment)},m(t,i){ut(e,t,i),n=1},p(t,n){const i={};128&n[0]&&(i.activeItem=t[7]),e.$set(i)},i(t){n||(et(e.$$.fragment,t),n=1)},o(t){nt(e.$$.fragment,t),n=0},d(t){at(e,t)}}}function Zt(t){let e,n;return e=new Mt({props:{stuff:{activeItem:t[7],calculateDimensions:t[16],toggleControls:t[21],loadImage:t[18],preloadNext:t[17],next:t[4],prev:t[3],close:t[2],opts:t[5]},containerWidth:t[8],containerHeight:t[9],smallScreen:t[11]}}),{c(){ct(e.$$.fragment)},m(t,i){ut(e,t,i),n=1},p(t,n){const i={};160&n[0]&&(i.stuff={activeItem:t[7],calculateDimensions:t[16],toggleControls:t[21],loadImage:t[18],preloadNext:t[17],next:t[4],prev:t[3],close:t[2],opts:t[5]}),256&n[0]&&(i.containerWidth=t[8]),512&n[0]&&(i.containerHeight=t[9]),2048&n[0]&&(i.smallScreen=t[11]),e.$set(i)},i(t){n||(et(e.$$.fragment,t),n=1)},o(t){nt(e.$$.fragment,t),n=0},d(t){at(e,t)}}}function Ft(t){let e,n,i,o=t[7].caption+"";return{c(){e=w("div"),C(e,"class","bp-cap")},m(t,n){v(t,e,n),e.innerHTML=o,i=1},p(t,n){(!i||128&n[0])&&o!==(o=t[7].caption+"")&&(e.innerHTML=o)},i(t){i||(q((()=>{n||(n=st(e,mt,{duration:200},1)),n.run(1)})),i=1)},o(t){n||(n=st(e,mt,{duration:200},0)),n.run(0),i=0},d(t){t&&x(e),t&&n&&n.end()}}}function Jt(t){let e,n,i,o,s,l,c,u,a;const d=[Zt,Ut,Xt,Bt],f=[];function p(t,e){return t[7].img?0:t[7].video?1:t[7].iframe?2:3}n=p(t),i=f[n]=d[n](t);let m=t[7].caption&&Ft(t);return{c(){e=w("div"),i.c(),m&&m.c(),l=k(),C(e,"class","bp-inner")},m(i,o){var r;v(i,e,o),f[n].m(e,null),m&&m.m(i,o),v(i,l,o),c=1,u||(a=[I(e,"pointerdown",t[26]),I(e,"pointerup",(r=t[27],function(t){t.target===this&&r.call(this,t)}))],u=1)},p(t,o){let r=n;n=p(t),n===r?f[n].p(t,o):(V(),nt(f[r],1,1,(()=>{f[r]=null})),tt(),i=f[n],i?i.p(t,o):(i=f[n]=d[n](t),i.c()),et(i,1),i.m(e,null)),t[7].caption?m?(m.p(t,o),128&o[0]&&et(m,1)):(m=Ft(t),m.c(),et(m,1),m.m(l.parentNode,l)):m&&(V(),nt(m,1,1,(()=>{m=null})),tt())},i(n){c||(et(i),q((()=>{s&&s.end(1),o=ot(e,t[19],{}),o.start()})),et(m),c=1)},o(n){nt(i),o&&o.invalidate(),s=rt(e,t[20],{}),nt(m),c=0},d(t){t&&x(e),f[n].d(),t&&s&&s.end(),m&&m.d(t),t&&x(l),u=0,r(a)}}}function Kt(t){let e,n,i,o,r=!t[5].noClose&&Gt(t),s=t[0].length>1&&Qt(t);return{c(){e=w("div"),r&&r.c(),n=k(),s&&s.c()},m(t,i){v(t,e,i),r&&r.m(e,null),b(e,n),s&&s.m(e,null),o=1},p(t,i){t[5].noClose?r&&(r.d(1),r=null):r?r.p(t,i):(r=Gt(t),r.c(),r.m(e,n)),t[0].length>1?s?s.p(t,i):(s=Qt(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){o||(q((()=>{i||(i=st(e,mt,{duration:300},1)),i.run(1)})),o=1)},o(t){i||(i=st(e,mt,{duration:300},0)),i.run(0),o=0},d(t){t&&x(e),r&&r.d(),s&&s.d(),t&&i&&i.end()}}}function Gt(t){let n,i,o;return{c(){n=w("button"),C(n,"class","bp-x"),C(n,"title","Close"),C(n,"aria-label","Close")},m(e,r){v(e,n,r),i||(o=I(n,"click",t[2]),i=1)},p:e,d(t){t&&x(n),i=0,o()}}}function Qt(t){let e,n,i,o,s,l,c,u,a=t[1]+1+"",d=t[0].length+"";return{c(){e=w("div"),n=_(a),i=_(" / "),o=_(d),s=w("button"),l=w("button"),C(e,"class","bp-count"),C(s,"class","bp-prev"),C(s,"title","Previous"),C(s,"aria-label","Previous"),C(l,"class","bp-next"),C(l,"title","Next"),C(l,"aria-label","Next")},m(r,a){v(r,e,a),b(e,n),b(e,i),b(e,o),v(r,s,a),v(r,l,a),c||(u=[I(s,"click",t[3]),I(l,"click",t[4])],c=1)},p(t,e){2&e[0]&&a!==(a=t[1]+1+"")&&E(n,a),1&e[0]&&d!==(d=t[0].length+"")&&E(o,d)},d(t){t&&x(e),t&&x(s),t&&x(l),c=0,r(u)}}}function Vt(t){let e,n,i,o,r=t[0]&&qt(t);return{c(){r&&r.c(),e=k()},m(s,l){r&&r.m(s,l),v(s,e,l),n=1,i||(o=I(jt,"keydown",t[15]),i=1)},p(t,n){t[0]?r?(r.p(t,n),1&n[0]&&et(r,1)):(r=qt(t),r.c(),et(r,1),r.m(e.parentNode,e)):r&&(V(),nt(r,1,1,(()=>{r=null})),tt())},i(t){n||(et(r),n=1)},o(t){nt(r),n=0},d(t){r&&r.d(t),t&&x(e),i=0,o()}}}function te(t,e,n){let i,o;a(t,vt,(t=>n(33,i=t))),a(t,xt,(t=>n(14,o=t)));let r,s,l,c,u,f,p,m,h,g,$,b,{items:y}=e,{position:v}=e,{target:x}=e;const w=()=>{let t=r.items;l=document.activeElement,n(8,u=x.offsetWidth),n(9,f=x===document.body?window.innerHeight:x.clientHeight),n(11,m=769>u),n(1,v=r.position||0),n(10,p=0),n(0,y=Array.isArray(t)?t.map(((t,e)=>({...t,i:e}))):[...t.length?t:[t]].map(((t,e)=>{let i={element:t,i:e};return t===r.el&&n(1,v=e),{...i,...t.dataset}})))},_=()=>{r.noClose||(r.onClose&&r.onClose(),d(vt,i=1,i),n(0,y=0),l&&l.focus({preventScroll:1}))},k=()=>C(v-1),I=()=>C(v+1),C=t=>{g=t-v,n(1,v=E(t))},E=t=>(t===y.length?t=0:0>t&&(t=y.length-1),t),z=(t,e,n)=>{let i,o;n=r.scale||.99;const s=(e=e||1080)/(t=t||1920);return s>f/u?(o=Math.min(e,f*n),i=o/s):(i=Math.min(t,u*n),o=i*s),[Math.round(i),Math.round(o)]},D=t=>{let{img:e,width:n,height:i}=t;if(!e)return;let o=new Image;return o.sizes=r.sizes||z(n,i)[0]+"px",o.srcset=e,t.preload=o,o.decode()},H=t=>{let{element:e}=b,n=t.querySelector(".bp-item"),{clientWidth:i,clientHeight:o}=n,{top:r,left:s,width:l,height:c}=e.getBoundingClientRect(),a=s-(u-l)/2,d=r-(f-c)/2,p=e.clientWidth/i,m=e.clientHeight/o;return{duration:480,easing:pt,css(t){let e=1-t;return`transform:translate3d(${a*e}px, ${d*e}px, 0px) scale3d(${p+t*(1-p)}, ${m+t*(1-m)}, 1)`}}},M=()=>{n(11,m=769>u),r.onResize&&r.onResize(b)};return t.$$set=t=>{"items"in t&&n(0,y=t.items),"position"in t&&n(1,v=t.position),"target"in t&&n(23,x=t.target)},t.$$.update=()=>{227&t.$$.dirty[0]&&y&&(n(7,b=y[v]),c&&r.onUpdate&&r.onUpdate(c,b))},[y,v,_,k,I,r,c,b,u,f,p,m,h,$,o,t=>{if(!s||h)return;let{key:e,shiftKey:n}=t;if("Escape"===e)_();else if("ArrowRight"===e)I();else if("ArrowLeft"===e)k();else if("Tab"===e){let{activeElement:e}=document;if(n||!e.controls){t.preventDefault();let i=[...(r.focusWrap||c).querySelectorAll("*")].filter((t=>t.tabIndex>=0)),o=i.indexOf(e);o+=i.length+(n?-1:1),o%=i.length,i[o].focus()}}},z,()=>{let t=y[E(v+1)],e=y[E(v-1)];!t.preload&&D(t),!e.preload&&D(e)},D,t=>s?ht(t,{x:g>0?20:-20,easing:pt,duration:250}):(s=1,r.onOpen&&r.onOpen(c),r.intro?ht(t,{y:10,easing:pt}):H(t)),t=>y?ht(t,{x:g>0?-20:20,easing:pt,duration:250}):r.intro?ht(t,{y:-10,easing:pt}):H(t),()=>n(10,p=!p),()=>(window.addEventListener("resize",M),{destroy(){window.removeEventListener("resize",M),d(vt,i=s=0,i),Yt.style.overflowY=Lt,Ot.style.overflowY=Lt,r.onClosed&&r.onClosed()}}),x,t=>{n(5,r=t),n(12,h=r.inline),h||Yt.scrollHeight>Yt.clientHeight&&(Lt=Lt||getComputedStyle(Yt).overflowY,Wt=Wt||getComputedStyle(Ot).overflowY,Yt.style.overflowY="hidden",Ot.style.overflowY="scroll"),setTimeout(w,0)},C,({target:t})=>n(13,$=t),({target:t})=>{t===$&&_()},t=>{n(9,f=t.target.clientHeight),n(8,u=t.target.clientWidth)},t=>{L[t?"unshift":"push"]((()=>{c=t,n(6,c)}))}]}class ee extends ft{constructor(t){super(),dt(this,t,te,Vt,u,{items:0,position:1,target:23,open:24,close:2,prev:3,next:4,setPosition:25},null,[-1,-1])}get items(){return this.$$.ctx[0]}set items(t){this.$$set({items:t}),Z()}get position(){return this.$$.ctx[1]}set position(t){this.$$set({position:t}),Z()}get target(){return this.$$.ctx[23]}set target(t){this.$$set({target:t}),Z()}get open(){return this.$$.ctx[24]}get close(){return this.$$.ctx[2]}get prev(){return this.$$.ctx[3]}get next(){return this.$$.ctx[4]}get setPosition(){return this.$$.ctx[25]}}return t=>new ee({...t,intro:1,props:t})}));
