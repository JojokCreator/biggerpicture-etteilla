function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n}function c(n,e,o){n.$$.on_destroy.push(((n,...e)=>{if(null==n)return t;const o=n.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o})(e,o))}function u(n){return n&&s(n.destroy)?n.destroy:t}let l=()=>globalThis.performance.now(),a=t=>requestAnimationFrame(t);const p=new Set;function f(t){p.forEach((n=>{n.c(t)||(p.delete(n),n.f())})),0!==p.size&&a(f)}function d(t){let n;return 0===p.size&&a(f),{promise:new Promise((e=>{p.add(n={c:t,f:e})})),abort(){p.delete(n)}}}function h(t,n){t.appendChild(n)}function m(t){const n=x("style");return((t,n)=>{h(t.head||t,n)})(document,n),n.sheet}function b(t,n,e){t.insertBefore(n,e||null)}function g(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function y(){return document.createTextNode("")}function w(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function v(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e)}function k(t,n,e){t.classList[e?"add":"remove"](n)}class _{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,e=null){this.e||(this.e=x(n.nodeName),this.t=n,this.c(t)),this.i(e)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;this.n.length>n;n+=1)b(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(g)}}const z=new Map;let M,S=0;function P(t,n,e,o,r,s,i,c=0){const u=16.666/o;let l="{\n";for(let t=0;1>=t;t+=u){const o=n+(e-n)*s(t);l+=100*t+`%{${i(o,1-o)}}\n`}const a=l+`100% {${i(e,1-e)}}\n}`,p=`_bp_${(t=>{let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0})(a)}_${c}`,f=document,{stylesheet:d,rules:h}=z.get(f)||((t,n)=>{const e={stylesheet:m(),rules:{}};return z.set(t,e),e})(f);h[p]||(h[p]=1,d.insertRule(`@keyframes ${p} ${a}`,d.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?b+", ":""}${p} ${o}ms linear ${r}ms 1 both`,S+=1,p}function A(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>0>t.indexOf(n):t=>-1===t.indexOf("_bp")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),S-=r,S||a((()=>{S||(z.forEach((t=>{const{stylesheet:n}=t;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.rules={}})),z.clear())})))}function T(t){M=t}const I=[],C=[],N=[],O=[],j=Promise.resolve();let E=0;function R(t){N.push(t)}const q=new Set;let F,D=0;function J(){const t=M;do{for(;I.length>D;){const t=I[D];D++,T(t),K(t.$$)}for(T(null),I.length=0,D=0;C.length;)C.pop()();for(let t=0;N.length>t;t+=1){const n=N[t];q.has(n)||(q.add(n),n())}N.length=0}while(I.length);for(;O.length;)O.pop()();E=0,q.clear(),T(t)}function K(t){if(null!==t.u){t.update(),r(t.before_update);const n=t.l;t.l=[-1],t.u&&t.u.p(t.ctx,n),t.after_update.forEach(R)}}function L(){return F||(F=Promise.resolve(),F.then((()=>{F=null}))),F}function W(t,n,e){t.dispatchEvent(((t,n,e=0)=>{const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,0,n),o})(`${n?"intro":"outro"}${e}`))}const X=new Set;let Y;function B(){Y={r:0,c:[],p:Y}}function G(){Y.r||r(Y.c),Y=Y.p}function H(t,n){t&&t.i&&(X.delete(t),t.i(n))}function Q(t,n,e,o){if(t&&t.o){if(X.has(t))return;X.add(t),Y.c.push((()=>{X.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}const U={duration:0};function V(e,o,r){let i,c,u=o(e,r),a=0,p=0;function f(){i&&A(e,i)}function h(){const{delay:o=0,duration:r=300,g:s=n,v:h=t,css:m}=u||U;m&&(i=P(e,0,1,r,o,s,m,p++)),h(0,1);const b=l()+o,g=b+r;c&&c.abort(),a=1,R((()=>W(e,1,"start"))),c=d((t=>{if(a){if(t>=g)return h(1,0),W(e,1,"end"),f(),a=0;if(t>=b){const n=s((t-b)/r);h(n,1-n)}}return a}))}let m=0;return{start(){m||(m=1,A(e),s(u)?(u=u(),L().then(h)):h())},invalidate(){m=0},end(){a&&(f(),a=0)}}}function Z(e,o,i){let c,u=o(e,i),a=1;const p=Y;function f(){const{delay:o=0,duration:s=300,g:i=n,v:f=t,css:h}=u||U;h&&(c=P(e,1,0,s,o,i,h));const m=l()+o,b=m+s;R((()=>W(e,0,"start"))),d((t=>{if(a){if(t>=b)return f(0,1),W(e,0,"end"),--p.r||r(p.c),0;if(t>=m){const n=i((t-m)/s);f(1-n,n)}}return a}))}return p.r+=1,s(u)?L().then((()=>{u=u(),f()})):f(),{end(t){t&&u.v&&u.v(1,0),a&&(c&&A(e,c),a=0)}}}function tt(t){t&&t.c()}function nt(t,n,e,i){const{u:c,on_mount:u,on_destroy:l,after_update:a}=t.$$;c&&c.m(n,e),i||R((()=>{const n=u.map(o).filter(s);l?l.push(...n):r(n),t.$$.on_mount=[]})),a.forEach(R)}function et(t,n){const e=t.$$;null!==e.u&&(r(e.on_destroy),e.u&&e.u.d(n),e.on_destroy=e.u=null,e.ctx=[])}function ot(n,e,o,s,i,c,u,l=[-1]){const a=M;T(n);const p=n.$$={u:null,ctx:null,$:c,update:t,not_equal:i,bound:{},on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:{},l,skip_bound:0,root:e.target||a.$$.root};u&&u(p.root);let f=0;p.ctx=o?o(n,e.$||{},((t,e,...o)=>{const r=o.length?o[0]:e;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),f&&((t,n)=>{-1===t.$$.l[0]&&(I.push(t),E||(E=1,j.then(J)),t.$$.l.fill(0)),t.$$.l[n/31|0]|=1<<n%31})(n,t)),e})):[],p.update(),f=1,r(p.before_update),p.u=s?s(p.ctx):0,e.target&&(p.u&&p.u.c(),nt(n,e.target,e.anchor,e.customElement),J()),T(a)}class rt{$destroy(){et(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){this.$$set&&0!==Object.keys(t).length&&(this.$$.skip_bound=1,this.$$set(t),this.$$.skip_bound=0)}}function st(t){const n=t-1;return n*n*n+1}function it(t,{delay:n=0,duration:e=400,g:o=st,x:r=0,y:s=0,opacity:i=0}={}){const c=getComputedStyle(t),u=+c.opacity,l="none"===c.transform?"":c.transform,a=u*(1-i);return{delay:n,duration:e,g:o,css(t,n){return`\n\t\t\ttransform: ${l} translate(${(1-t)*r}px, ${(1-t)*s}px);\n\t\t\topacity: ${u-a*n}`}}}const ct=[];function ut(n,e=t){let o;const r=new Set;function s(t){if(s=t,((e=n)!=e?s==s:e!==s||e&&"object"==typeof e||"function"==typeof e)&&(n=t,o)){const t=!ct.length;for(const t of r)t[1](),ct.push(t,n);if(t){for(let t=0;ct.length>t;t+=2)ct[t][0](ct[t+1]);ct.length=0}}var e,s}return{set:s,update(t){s(t(n))},subscribe(i,c=t){const u=[i,c];return r.add(u),1===r.size&&(o=e(s)||t),i(n),()=>{r.delete(u),0===r.size&&(o(),o=null)}}}}function lt(t,n){if(t===n||t!=t)return()=>t;const e=typeof t;if(Array.isArray(t)){const e=n.map(((n,e)=>lt(t[e],n)));return t=>e.map((n=>n(t)))}if("number"===e){const e=n-t;return n=>t+n*e}}function at(t,o={}){const r=ut(t);let s,i=t;function c(c,u){if(null==t)return r.set(t=c),Promise.resolve();i=c;let a=s,p=0,{delay:f=0,duration:h=400,g:m=n,interpolate:b=lt}=e(e({},o),u);if(0===h)return a&&(a.abort(),a=null),r.set(t=i),Promise.resolve();const g=l()+f;let x;return s=d((n=>{if(g>n)return 1;p||(x=b(t,c),"function"==typeof h&&(h=h(t,c)),p=1),a&&(a.abort(),a=null);const e=n-g;return e>h?(r.set(t=c),0):(r.set(t=x(m(e/h))),1)})),s.promise}return{set:c,update(n,e){return c(n(i,t),e)},subscribe:r.subscribe}}const pt=ut(0),ft=globalThis.matchMedia?.("(prefers-reduced-motion: reduce)").matches,dt=t=>({g:st,duration:ft?0:t});function ht(n){let e,o,r,s,i;return{c(){e=x("div"),o=x("span"),r=x("span"),v(o,"class","bp-bar"),v(r,"class","bp-o"),v(e,"class","bp-load"),v(e,"style",n[2])},m(t,n){b(t,e,n),h(e,o),h(e,r),i=1},p:t,i(t){i||(s&&s.end(1),i=1)},o(t){t&&(s=Z(e,it,{duration:480})),i=0},d(t){t&&g(e),t&&s&&s.end()}}}function mt(n){let e,o;return{c(){e=x("div"),v(e,"class","bp-load"),v(e,"style",n[2])},m(t,n){b(t,e,n)},p:t,i(t){o||R((()=>{o=V(e,it,{duration:480}),o.start()}))},o:t,d(t){t&&g(e)}}}function bt(t){let n,e,o=!t[0]&&ht(t),r=t[1]&&mt(t);return{c(){o&&o.c(),n=y(),r&&r.c(),e=y()},m(t,s){o&&o.m(t,s),b(t,n,s),r&&r.m(t,s),b(t,e,s)},p(t,[s]){t[0]?o&&(B(),Q(o,1,1,(()=>{o=null})),G()):o?(o.p(t,s),1&s&&H(o,1)):(o=ht(t),o.c(),H(o,1),o.m(n.parentNode,n)),t[1]?r?(r.p(t,s),2&s&&H(r,1)):(r=mt(t),r.c(),H(r,1),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i(t){H(o),H(r)},o(t){Q(o)},d(t){o&&o.d(t),t&&g(n),r&&r.d(t),t&&g(e)}}}function gt(t,n,e){let o;c(t,pt,(t=>e(1,o=t)));let{thumb:r}=n,{loaded:s}=n;const i=`background-image:url(${r})`;return t.$$set=t=>{"thumb"in t&&e(3,r=t.thumb),"loaded"in t&&e(0,s=t.loaded)},[s,o,i,r]}class xt extends rt{constructor(t){super(),ot(this,t,gt,bt,i,{thumb:3,loaded:0})}}function yt(t){let n,e,o,r,s,i,c,u;return{c(){n=x("img"),v(n,"srcset",e=t[7].img),v(n,"sizes",o=t[8].sizes||t[1]+"px"),v(n,"alt",r=t[7].alt)},m(e,o){b(e,n,o),i=1,c||(u=w(n,"error",t[26]),c=1)},p(t,e){(!i||2&e[0]&&o!==(o=t[8].sizes||t[1]+"px"))&&v(n,"sizes",o)},i(t){i||(s&&s.end(1),i=1)},o(t){s=Z(n,it,{}),i=0},d(t){t&&g(n),t&&s&&s.end(),c=0,u()}}}function wt(t){let n,e;return n=new xt({$:{thumb:t[7].thumb,loaded:t[2]}}),{c(){tt(n.$$.u)},m(t,o){nt(n,t,o),e=1},p(t,e){const o={};4&e[0]&&(o.loaded=t[2]),n.$set(o)},i(t){e||(H(n.$$.u,t),e=1)},o(t){Q(n.$$.u,t),e=0},d(t){et(n,t)}}}function vt(t){let n,e,o,s,i,c,l=t[2]&&yt(t),a=t[3]&&wt(t);return{c(){n=x("div"),e=x("div"),l&&l.c(),o=y(),a&&a.c(),v(e,"class","bp-img"),$(e,"background-image","url("+t[7].thumb+")"),$(e,"width",t[0][0]+"px"),$(e,"height",t[0][1]+"px"),$(e,"transform","translate3d("+(t[0][0]/-2+t[6][0])+"px, "+(t[0][1]/-2+t[6][1])+"px, 0)"),k(e,"bp-drag",t[4]),k(e,"bp-canzoom",t[11]>1&&t[12]>t[0][0]),v(n,"class","bp-img-wrap"),k(n,"bp-close",t[5])},m(r,p){b(r,n,p),h(n,e),l&&l.m(e,null),h(e,o),a&&a.m(e,null),s=1,i||(c=[u(t[20].call(null,e)),w(n,"wheel",t[15]),w(n,"pointerdown",t[16]),w(n,"pointermove",t[17]),w(n,"pointerup",t[19]),w(n,"pointercancel",t[18])],i=1)},p(t,r){t[2]?l?(l.p(t,r),4&r[0]&&H(l,1)):(l=yt(t),l.c(),H(l,1),l.m(e,o)):l&&(B(),Q(l,1,1,(()=>{l=null})),G()),t[3]?a?(a.p(t,r),8&r[0]&&H(a,1)):(a=wt(t),a.c(),H(a,1),a.m(e,null)):a&&(B(),Q(a,1,1,(()=>{a=null})),G()),(!s||1&r[0])&&$(e,"width",t[0][0]+"px"),(!s||1&r[0])&&$(e,"height",t[0][1]+"px"),(!s||65&r[0])&&$(e,"transform","translate3d("+(t[0][0]/-2+t[6][0])+"px, "+(t[0][1]/-2+t[6][1])+"px, 0)"),16&r[0]&&k(e,"bp-drag",t[4]),6145&r[0]&&k(e,"bp-canzoom",t[11]>1&&t[12]>t[0][0]),32&r[0]&&k(n,"bp-close",t[5])},i(t){s||(H(l),H(a),s=1)},o(t){Q(l),Q(a),s=0},d(t){t&&g(n),l&&l.d(),a&&a.d(),i=0,r(c)}}}function $t(t,n,e){let o,r,s,i;c(t,pt,(t=>e(25,s=t)));let{$:u}=n,{k:l}=n,{_:a,M:p,S:f,next:d,zoomed:h,container:m}=u;c(t,h,(t=>e(24,o=t)));let b,g,x,y,w,v,$,k,_,z,M,S=a.maxZoom||p.maxZoom||10,P=u.P(a),A=P[0],T=0;const I=+a.width,C=[],N=new Map,O=at(P,dt(400));c(t,O,(t=>e(0,i=t)));const j=at([0,0],dt(400));c(t,j,(t=>e(6,r=t)));const E=([t,n],o=i)=>{const r=(o[0]-m.w)/2,s=(o[1]-m.h)/2;return 0>r?t=0:t>r?l?(t=w?r+(t-r)/10:r)>r+20&&e(4,w=f()):t=r:-r>t&&(l?-r-20>(t=w?-r-(-r-t)/10:-r)&&e(4,w=d()):t=-r),0>s?n=0:n>s?n=s:-s>n&&(n=-s),[t,n]};function R(t=S,n){if(s)return;const o=P[0]*S;let c=i[0]+i[0]*t,u=i[1]+i[1]*t;if(t>0)c>o&&(c=o,u=P[1]*S),c>I&&(c=I,u=+a.height);else if(P[0]>c)return O.set(P),j.set([0,0]);let{x:l,y:p,width:f,height:d}=y.getBoundingClientRect();const h=n?n.clientX-l-f/2:0,m=n?n.clientY-p-d/2:0;l=c/f*-h+h,p=u/d*-m+m;const b=[c,u];O.set(b).then((()=>{e(1,A=Math.round(Math.max(A,c)))})),j.set(E([r[0]+l,r[1]+p],b))}Object.defineProperty(a,"zoom",{configurable:1,get(){return o},set(t){return R(t?S:-S)}});const q=t=>N.delete(t.pointerId);return t.$$set=t=>{"k"in t&&e(22,l=t.k)},t.$$.update=()=>{if(8388609&t.$$.l[0]&&h.set(i[0]-10>P[0]),58720256&t.$$.l[0]&&s&&o&&!p.intro){const t=dt(480);j.set([0,0],t),O.set(P,t),e(5,M=1)}},[i,A,b,g,w,M,r,a,p,h,m,S,I,O,j,t=>{p.inline&&!o||(t.preventDefault(),R(t.deltaY/-300,t))},t=>{2!==t.button&&(t.preventDefault(),e(4,w=1),N.set(t.pointerId,t),$=t.clientX,k=t.clientY,_=r[0],z=r[1])},t=>{if(N.size>1)return e(4,w=0),p.noPinch?.(m.el)||(t=>{const[n,e]=N.set(t.pointerId,t).values(),o=Math.hypot(n.clientX-e.clientX,n.clientY-e.clientY);x=x||{clientX:(n.clientX+e.clientX)/2,clientY:(n.clientY+e.clientY)/2},R(((T||o)-o)/-35,x),T=o})(t);if(!w)return;let n=t.clientX,r=t.clientY;v=C.push({x:n,y:r})>2,n-=$,r-=k,o||(-90>r&&e(4,w=!p.noClose&&u.close()),30>Math.abs(r)&&(n>40&&e(4,w=f()),-40>n&&e(4,w=d()))),o&&v&&!s&&j.set(E([_+n,z+r]),{duration:0})},q,function(t){if(q(t),x&&(e(4,w=T=0),x=N.size?x:null),w){if(e(4,w=0),t.target===this&&!p.noClose)return u.close();if(v){const[t,n,e]=C.slice(-3);Math.hypot(n.x-e.x,n.y-e.y)>5&&j.set(E([r[0]-5*(t.x-e.x),r[1]-5*(t.y-e.y)]))}else p.onImageClick?.(m.el,a)||R(o?-S:S,t);v=0,C.length=0}},t=>{y=t,u.A((()=>{e(23,P=u.P(a)),!p.inline&&l||(O.set(P),j.set([0,0]))})),u.T(a).then((()=>{e(2,b=1),u.I()})),setTimeout((()=>{e(3,g=!b)}),250)},u,l,P,o,s,t=>p.onError?.(m,a,t)]}class kt extends rt{constructor(t){super(),ot(this,t,$t,vt,i,{$:21,k:22},null,[-1,-1])}}function _t(t){let n,e,o,s,i,c;return o=new xt({$:{thumb:t[2].thumb,loaded:t[0]}}),{c(){n=x("div"),e=x("iframe"),tt(o.$$.u),v(e,"allow","autoplay; fullscreen"),v(e,"title",t[2].title),v(n,"class","bp-if"),$(n,"width",t[1][0]+"px"),$(n,"height",t[1][1]+"px")},m(r,l){b(r,n,l),h(n,e),nt(o,n,null),s=1,i||(c=[u(t[3].call(null,e)),w(e,"load",t[5])],i=1)},p(t,[e]){const r={};1&e&&(r.loaded=t[0]),o.$set(r),(!s||2&e)&&$(n,"width",t[1][0]+"px"),(!s||2&e)&&$(n,"height",t[1][1]+"px")},i(t){s||(H(o.$$.u,t),s=1)},o(t){Q(o.$$.u,t),s=0},d(t){t&&g(n),et(o),i=0,r(c)}}}function zt(t,n,e){let o,r,{$:s}=n;const{_:i}=s,c=()=>e(1,r=s.P(i));return c(),s.A(c),[o,r,i,t=>t.src=i.iframe,s,()=>e(0,o=1)]}class Mt extends rt{constructor(t){super(),ot(this,t,zt,_t,i,{$:4})}}function St(t){let n,e,o,r,s;return e=new xt({$:{thumb:t[2].thumb,loaded:t[0]}}),{c(){n=x("div"),tt(e.$$.u),v(n,"class","bp-vid"),$(n,"width",t[1][0]+"px"),$(n,"height",t[1][1]+"px"),$(n,"background-image","url("+t[2].thumb+")")},m(i,c){b(i,n,c),nt(e,n,null),o=1,r||(s=u(t[3].call(null,n)),r=1)},p(t,[r]){const s={};1&r&&(s.loaded=t[0]),e.$set(s),(!o||2&r)&&$(n,"width",t[1][0]+"px"),(!o||2&r)&&$(n,"height",t[1][1]+"px")},i(t){o||(H(e.$$.u,t),o=1)},o(t){Q(e.$$.u,t),o=0},d(t){t&&g(n),et(e),r=0,s()}}}function Pt(t,n,e){let o,r,{$:s}=n;const{_:i,M:c,container:u}=s,l=()=>e(1,r=s.P(i));l(),s.A(l);const a=(t,n)=>{for(const e in n)v(t,e,n[e])};return[o,r,i,t=>{let n;const r=(t,e)=>{Array.isArray(e)||(e=JSON.parse(e));for(const o of e){n||(n=x(o.type?.includes("audio")?"audio":"video"),a(n,{controls:1,autoplay:1,playsinline:1,tabindex:"0"}));const e=x(t);a(e,o),"source"==t&&w(e,"error",(t=>c.onError?.(u,i,t))),h(n,e)}};r("source",i.sources),r("track",i.tracks||[]),w(n,"canplay",(()=>e(0,o=1))),h(t,n)},s]}class At extends rt{constructor(t){super(),ot(this,t,Pt,St,i,{$:4})}}function Tt(n){let e,o,s,c,l,a,p,f,d,m,y=n[6].i,$=qt(n),_=n[0].length>1&&Ft(n);return{c(){e=x("div"),o=x("div"),$.c(),c=x("div"),l=x("button"),_&&_.c(),v(l,"class","bp-x"),v(l,"title","Close"),v(l,"aria-label","Close"),v(c,"class","bp-controls"),v(e,"class","bp-wrap"),k(e,"bp-zoomed",n[10]),k(e,"bp-inline",n[8]),k(e,"bp-small",n[7]),k(e,"bp-noclose",n[5].noClose)},m(t,r){b(t,e,r),h(e,o),$.m(e,null),h(e,c),h(c,l),_&&_.m(c,null),f=1,d||(m=[w(l,"click",n[1]),u(p=n[14].call(null,e))],d=1)},p(n,o){64&o[0]&&i(y,y=n[6].i)?(B(),Q($,1,1,t),G(),$=qt(n),$.c(),H($),$.m(e,c)):$.p(n,o),n[0].length>1?_?_.p(n,o):(_=Ft(n),_.c(),_.m(c,null)):_&&(_.d(1),_=null),1024&o[0]&&k(e,"bp-zoomed",n[10]),256&o[0]&&k(e,"bp-inline",n[8]),128&o[0]&&k(e,"bp-small",n[7]),32&o[0]&&k(e,"bp-noclose",n[5].noClose)},i(t){f||(s&&s.end(1),H($),a&&a.end(1),f=1)},o(t){t&&(s=Z(o,it,{duration:480})),Q($),t&&(a=Z(c,it,{})),f=0},d(t){t&&g(e),t&&s&&s.end(),$.d(t),_&&_.d(),t&&a&&a.end(),d=0,r(m)}}}function It(n){let e;function o(t,n){return t[6].html?Et:jt}let r=o(n),s=r(n);return{c(){e=x("div"),s.c(),v(e,"class","bp-html")},m(t,n){b(t,e,n),s.m(e,null)},p(t,n){r===(r=o(t))&&s?s.p(t,n):(s.d(1),s=r(t),s&&(s.c(),s.m(e,null)))},i:t,o:t,d(t){t&&g(e),s.d()}}}function Ct(n){let e,o;return e=new Mt({$:{$:n[13]()}}),{c(){tt(e.$$.u)},m(t,n){nt(e,t,n),o=1},p:t,i(t){o||(H(e.$$.u,t),o=1)},o(t){Q(e.$$.u,t),o=0},d(t){et(e,t)}}}function Nt(n){let e,o;return e=new At({$:{$:n[13]()}}),{c(){tt(e.$$.u)},m(t,n){nt(e,t,n),o=1},p:t,i(t){o||(H(e.$$.u,t),o=1)},o(t){Q(e.$$.u,t),o=0},d(t){et(e,t)}}}function Ot(t){let n,e;return n=new kt({$:{$:t[13](),k:t[7]}}),{c(){tt(n.$$.u)},m(t,o){nt(n,t,o),e=1},p(t,e){const o={};128&e[0]&&(o.k=t[7]),n.$set(o)},i(t){e||(H(n.$$.u,t),e=1)},o(t){Q(n.$$.u,t),e=0},d(t){et(n,t)}}}function jt(t){let n,e,o=t[6].element.outerHTML+"";return{c(){n=new _,e=y(),n.a=e},m(t,r){n.m(o,t,r),b(t,e,r)},p(t,e){64&e[0]&&o!==(o=t[6].element.outerHTML+"")&&n.p(o)},d(t){t&&g(e),t&&n.d()}}}function Et(t){let n,e,o=t[6].html+"";return{c(){n=new _,e=y(),n.a=e},m(t,r){n.m(o,t,r),b(t,e,r)},p(t,e){64&e[0]&&o!==(o=t[6].html+"")&&n.p(o)},d(t){t&&g(e),t&&n.d()}}}function Rt(t){let n,e,o,r=t[6].caption+"";return{c(){n=x("div"),v(n,"class","bp-cap")},m(t,e){b(t,n,e),n.innerHTML=r,o=1},p(t,e){(!o||64&e[0])&&r!==(r=t[6].caption+"")&&(n.innerHTML=r)},i(t){o||(e&&e.end(1),o=1)},o(t){e=Z(n,it,{duration:200}),o=0},d(t){t&&g(n),t&&e&&e.end()}}}function qt(t){let n,e,o,s,i,c,u,l,a;const p=[Ot,Nt,Ct,It],f=[];function d(t,n){return t[6].img?0:t[6].sources?1:t[6].iframe?2:3}e=d(t),o=f[e]=p[e](t);let h=t[6].caption&&Rt(t);return{c(){n=x("div"),o.c(),h&&h.c(),c=y(),v(n,"class","bp-inner")},m(o,r){b(o,n,r),f[e].m(n,null),h&&h.m(o,r),b(o,c,r),u=1,l||(a=[w(n,"pointerdown",t[21]),w(n,"pointerup",t[22])],l=1)},p(t,r){let s=e;e=d(t),e===s?f[e].p(t,r):(B(),Q(f[s],1,1,(()=>{f[s]=null})),G(),o=f[e],o?o.p(t,r):(o=f[e]=p[e](t),o.c()),H(o,1),o.m(n,null)),t[6].caption?h?(h.p(t,r),64&r[0]&&H(h,1)):(h=Rt(t),h.c(),H(h,1),h.m(c.parentNode,c)):h&&(B(),Q(h,1,1,(()=>{h=null})),G())},i(e){u||(H(o),R((()=>{i&&i.end(1),s=V(n,t[12],1),s.start()})),H(h),u=1)},o(e){Q(o),s&&s.invalidate(),i=Z(n,t[12],0),Q(h),u=0},d(t){t&&g(n),f[e].d(),t&&i&&i.end(),h&&h.d(t),t&&g(c),l=0,r(a)}}}function Ft(t){let n,e,o,s,i,c=`${t[4]+1} / ${t[0].length}`;return{c(){n=x("div"),e=x("button"),o=x("button"),v(n,"class","bp-count"),v(e,"class","bp-prev"),v(e,"title","Previous"),v(e,"aria-label","Previous"),v(o,"class","bp-next"),v(o,"title","Next"),v(o,"aria-label","Next")},m(r,u){b(r,n,u),n.innerHTML=c,b(r,e,u),b(r,o,u),s||(i=[w(e,"click",t[2]),w(o,"click",t[3])],s=1)},p(t,e){17&e[0]&&c!==(c=`${t[4]+1} / ${t[0].length}`)&&(n.innerHTML=c)},d(t){t&&g(n),t&&g(e),t&&g(o),s=0,r(i)}}}function Dt(t){let n,e,o=t[0]&&Tt(t);return{c(){o&&o.c(),n=y()},m(t,r){o&&o.m(t,r),b(t,n,r),e=1},p(t,e){t[0]?o?(o.p(t,e),1&e[0]&&H(o,1)):(o=Tt(t),o.c(),H(o,1),o.m(n.parentNode,n)):o&&(B(),Q(o,1,1,(()=>{o=null})),G())},i(t){e||(H(o),e=1)},o(t){Q(o),e=0},d(t){o&&o.d(t),t&&g(n)}}}function Jt(t,n,e){let o,{items:r}=n,{target:s}=n;const i=document.documentElement;let u,l,a,p,f,d,h,m,b,g,y;const v=t=>y=t,$={},k=ut(0);c(t,k,(t=>e(10,o=t)));const _=()=>{l.onClose?.($.el,b),pt.set(1),e(0,r=null),p?.focus({preventScroll:1})},z=()=>S(u-1),M=()=>S(u+1),S=t=>{h=t-u,e(4,u=P(t))},P=t=>(t+r.length)%r.length,A=t=>{const{key:n,shiftKey:e}=t;if("Escape"===n)!l.noClose&&_();else if("ArrowRight"===n)M();else if("ArrowLeft"===n)z();else if("Tab"===n){const{activeElement:n}=document;if(e||!n.controls){t.preventDefault();const{focusWrap:o=$.el}=l,r=[...o.querySelectorAll("*")].filter((t=>t.tabIndex>=0));let s=r.indexOf(n);s+=r.length+(e?-1:1),r[s%r.length].focus()}}},T=({width:t=1920,height:n=1080})=>{const{scale:e=.99}=l,o=Math.min(1,$.w/t*e,$.h/n*e);return[Math.round(t*o),Math.round(n*o)]},I=()=>{if(r){const t=r[P(u+1)],n=r[P(u-1)];!t.preload&&C(t),!n.preload&&C(n)}},C=t=>{if(t.img){const n=x("img");return n.sizes=l.sizes||T(t)[0]+"px",n.srcset=t.img,t.preload=1,n.decode().catch((t=>{}))}};return t.$$set=t=>{"items"in t&&e(0,r=t.items),"target"in t&&e(15,s=t.target)},t.$$.update=()=>{1835121&t.$$.l[0]&&r&&(e(6,b=r[u]),e(19,g=b.hasOwnProperty("html")),a&&(g&&v(null),l.onUpdate?.($.el,b)))},[r,_,z,M,u,l,b,f,d,m,o,k,(t,n)=>a&&r?it(t,{x:(h>0?20:-20)*(n?1:-1),duration:250}):(e(18,a=n),l.intro?it(t,{y:n?10:-10}):(t=>{let n;if(g){const e=t.firstChild.firstChild;n=[e.clientWidth,e.clientHeight]}else n=T(b);const e=(b.element||p).getBoundingClientRect(),o=e.left-($.w-e.width)/2,r=e.top-($.h-e.height)/2,s=e.width/n[0],i=e.height/n[1];return{duration:480,g:st,css:(t,n)=>`transform:translate3d(${o*n}px, ${r*n}px, 0) scale3d(${s+t*(1-s)}, ${i+t*(1-i)}, 1)`}})(t)),()=>({_:b,P:T,T:C,I,M:l,S:z,next:M,close:_,A:v,zoomed:k,container:$}),t=>{let n,o;e(20,$.el=t,$),l.onOpen?.($.el,b),d||(n=w(globalThis,"keydown",A));const r=new ResizeObserver((t=>{o&&(e(20,$.w=t[0].contentRect.width,$),e(20,$.h=t[0].contentRect.height,$),e(7,f=769>$.w),y?.(),l.onResize?.($.el,b)),o=1}));return r.observe(t),{destroy(){r.disconnect(),n?.(),pt.set(0),i.classList.remove("bp-lock"),l.onClosed?.()}}},s,t=>{e(5,l=t),e(8,d=l.inline);const n=l.items;!d&&i.scrollHeight>i.clientHeight&&i.classList.add("bp-lock"),p=document.activeElement,e(20,$.w=s.offsetWidth,$),e(20,$.h=s===document.body?globalThis.innerHeight:s.clientHeight,$),e(7,f=769>$.w),e(4,u=l.position||0),e(0,r=Array.isArray(n)?n.map(((t,n)=>(l.el&&l.el===t.element&&e(4,u=n),{i:n,...t}))):(n.length?[...n]:[n]).map(((t,n)=>(l.el===t&&e(4,u=n),{element:t,i:n,...t.dataset}))))},S,a,g,$,t=>e(9,m=t.target),function(t){2!==t.button&&t.target===this&&m===this&&!l.noClose&&_()}]}class Kt extends rt{constructor(t){super(),ot(this,t,Jt,Dt,i,{items:0,target:15,open:16,close:1,S:2,next:3,setPosition:17},null,[-1,-1])}get items(){return this.$$.ctx[0]}get target(){return this.$$.ctx[15]}get open(){return this.$$.ctx[16]}get close(){return this.$$.ctx[1]}get S(){return this.$$.ctx[2]}get next(){return this.$$.ctx[3]}get setPosition(){return this.$$.ctx[17]}}function Lt(t){return new Kt({...t,$:t})}export{Lt as default};
